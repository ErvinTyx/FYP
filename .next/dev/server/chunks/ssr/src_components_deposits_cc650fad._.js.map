{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/DepositStatusBadge.tsx"],"sourcesContent":["import { Badge } from \"../ui/badge\";\nimport { Deposit } from \"../../types/deposit\";\n\ninterface DepositStatusBadgeProps {\n  status: Deposit['status'];\n}\n\nexport function DepositStatusBadge({ status }: DepositStatusBadgeProps) {\n  switch (status) {\n    case 'Pending Payment':\n      return (\n        <Badge className=\"bg-[#F5A623] hover:bg-[#D88F1C] text-white\">\n          Pending Payment\n        </Badge>\n      );\n    case 'Pending Approval':\n      return (\n        <Badge className=\"bg-[#3B82F6] hover:bg-[#2563EB] text-white\">\n          Pending Approval\n        </Badge>\n      );\n    case 'Paid':\n      return (\n        <Badge className=\"bg-[#059669] hover:bg-[#047857] text-white\">\n          Paid\n        </Badge>\n      );\n    case 'Rejected':\n      return (\n        <Badge className=\"bg-[#DC2626] hover:bg-[#B91C1C] text-white\">\n          Rejected\n        </Badge>\n      );\n    case 'Overdue':\n      return (\n        <Badge className=\"bg-[#EA580C] hover:bg-[#C2410C] text-white\">\n          Overdue\n        </Badge>\n      );\n  }\n}"],"names":[],"mappings":";;;;;AAAA;;;AAOO,SAAS,mBAAmB,EAAE,MAAM,EAA2B;IACpE,OAAQ;QACN,KAAK;YACH,qBACE,8OAAC,0IAAK;gBAAC,WAAU;0BAA6C;;;;;;QAIlE,KAAK;YACH,qBACE,8OAAC,0IAAK;gBAAC,WAAU;0BAA6C;;;;;;QAIlE,KAAK;YACH,qBACE,8OAAC,0IAAK;gBAAC,WAAU;0BAA6C;;;;;;QAIlE,KAAK;YACH,qBACE,8OAAC,0IAAK;gBAAC,WAAU;0BAA6C;;;;;;QAIlE,KAAK;YACH,qBACE,8OAAC,0IAAK;gBAAC,WAAU;0BAA6C;;;;;;IAIpE;AACF"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/PaymentProofUpload.tsx"],"sourcesContent":["import { useState, useRef } from \"react\";\nimport { Upload, X, FileText, Image as ImageIcon, CheckCircle } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Card } from \"../ui/card\";\n\ninterface PaymentProofUploadProps {\n  onFileSelect: (file: File | null) => void;\n  existingFile?: File | null;\n}\n\nexport function PaymentProofUpload({ onFileSelect, existingFile }: PaymentProofUploadProps) {\n  const [file, setFile] = useState<File | null>(existingFile || null);\n  const [preview, setPreview] = useState<string | null>(null);\n  const [uploadTime, setUploadTime] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (selectedFile: File | null) => {\n    if (selectedFile) {\n      // Check file size (10MB limit)\n      const maxSize = 10 * 1024 * 1024; // 10MB in bytes\n      if (selectedFile.size > maxSize) {\n        alert(\"File size exceeds 10MB limit. Please choose a smaller file.\");\n        return;\n      }\n\n      // Check file type\n      const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];\n      if (!validTypes.includes(selectedFile.type)) {\n        alert(\"Invalid file type. Please upload PDF, JPG, or PNG only.\");\n        return;\n      }\n\n      setFile(selectedFile);\n      onFileSelect(selectedFile);\n      setUploadTime(new Date().toLocaleString());\n\n      // Generate preview for images\n      if (selectedFile.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          setPreview(reader.result as string);\n        };\n        reader.readAsDataURL(selectedFile);\n      } else {\n        setPreview(null);\n      }\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0] || null;\n    handleFileSelect(selectedFile);\n  };\n\n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragging(false);\n  };\n\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const droppedFile = e.dataTransfer.files?.[0] || null;\n    handleFileSelect(droppedFile);\n  };\n\n  const handleRemoveFile = () => {\n    setFile(null);\n    setPreview(null);\n    setUploadTime(null);\n    onFileSelect(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return bytes + ' B';\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n  };\n\n  const isImage = (file: File) => {\n    return file.type.startsWith('image/');\n  };\n\n  if (file) {\n    return (\n      <Card className=\"border-[#E5E7EB] bg-[#F9FAFB]\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <CheckCircle className=\"h-5 w-5 text-[#059669]\" />\n            <p className=\"text-[#059669]\">File uploaded successfully</p>\n          </div>\n\n          <div className=\"space-y-4\">\n            {preview && (\n              <div className=\"relative w-full h-48 rounded-lg overflow-hidden border border-[#E5E7EB]\">\n                <img\n                  src={preview}\n                  alt=\"Payment proof preview\"\n                  className=\"w-full h-full object-contain bg-white\"\n                />\n              </div>\n            )}\n\n            <Card className=\"p-4 border-[#E5E7EB] bg-white\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex-shrink-0\">\n                  {isImage(file) ? (\n                    <ImageIcon className=\"h-10 w-10 text-[#F15929]\" />\n                  ) : (\n                    <FileText className=\"h-10 w-10 text-[#6B7280]\" />\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-[14px] text-[#111827] truncate\">\n                    {file.name}\n                  </p>\n                  <p className=\"text-[12px] text-[#6B7280]\">\n                    {formatFileSize(file.size)}\n                  </p>\n                  {uploadTime && (\n                    <p className=\"text-[12px] text-[#6B7280] mt-1\">\n                      Uploaded: {uploadTime}\n                    </p>\n                  )}\n                </div>\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={handleRemoveFile}\n                  className=\"flex-shrink-0 hover:bg-[#FEF2F2]\"\n                >\n                  <X className=\"h-4 w-4 text-[#DC2626]\" />\n                </Button>\n              </div>\n            </Card>\n          </div>\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <div\n      className={`border-2 border-dashed rounded-lg p-12 text-center transition-all cursor-pointer shadow-sm ${\n        isDragging \n          ? 'border-[#F15929] bg-[#FFF7F5]' \n          : 'border-[#D1D5DB] bg-white hover:border-[#F15929] hover:bg-[#FAFAFA]'\n      }`}\n      onClick={() => fileInputRef.current?.click()}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n    >\n      <Upload className={`h-16 w-16 mx-auto mb-4 ${isDragging ? 'text-[#F15929]' : 'text-[#6B7280]'}`} />\n      <p className=\"text-[#111827] mb-2\">\n        {isDragging ? 'Drop file here' : 'Click to upload or drag and drop'}\n      </p>\n      <p className=\"text-[14px] text-[#6B7280] mb-1\">\n        Upload the receipt, bank transfer slip, or payment confirmation\n      </p>\n      <p className=\"text-[14px] text-[#6B7280]\">\n        PNG, JPG, PDF up to 10MB\n      </p>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*,.pdf\"\n        className=\"hidden\"\n        onChange={handleInputChange}\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/UploadProofModal.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { X, Upload as UploadIcon } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"../ui/dialog\";\nimport { PaymentProofUpload } from \"./PaymentProofUpload\";\n\ninterface UploadProofModalProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (file: File) => void;\n  depositInvoiceNo: string;\n  isReupload?: boolean;\n}\n\nexport function UploadProofModal({\n  open,\n  onClose,\n  onSubmit,\n  depositInvoiceNo,\n  isReupload = false,\n}: UploadProofModalProps) {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  const handleSubmit = () => {\n    if (selectedFile) {\n      onSubmit(selectedFile);\n      setSelectedFile(null);\n      onClose();\n    }\n  };\n\n  const handleCancel = () => {\n    setSelectedFile(null);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleCancel}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-[20px]\">Upload Proof of Payment</DialogTitle>\n          <p className=\"text-[14px] text-[#6B7280] mt-2\">\n            Invoice: <span className=\"text-[#111827]\">{depositInvoiceNo}</span>\n          </p>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div>\n            <label className=\"text-[14px] text-[#374151] mb-3 block\">\n              Upload Proof of Payment Document\n            </label>\n            <PaymentProofUpload\n              onFileSelect={setSelectedFile}\n              existingFile={selectedFile}\n            />\n          </div>\n\n          <div className=\"bg-[#F0F9FF] border border-[#BAE6FD] rounded-lg p-3\">\n            <p className=\"text-[14px] text-[#075985]\">\n              <strong>Note:</strong> Accepted file types are PDF, JPG, and PNG (max 10MB). \n              {isReupload \n                ? \" This re-submission will move the deposit back to \\\"Pending Approval\\\" status for review.\"\n                : \" After submission, this deposit will move to \\\"Pending Approval\\\" status.\"}\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter className=\"gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={handleCancel}\n            className=\"border-[#D1D5DB] text-[#374151] hover:bg-[#F3F4F6]\"\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSubmit}\n            disabled={!selectedFile}\n            className=\"bg-[#F15929] hover:bg-[#D14620] text-white disabled:opacity-50\"\n          >\n            <UploadIcon className=\"mr-2 h-4 w-4\" />\n            Submit for Approval\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAOA;;;;;;;AAUO,SAAS,iBAAiB,EAC/B,IAAI,EACJ,OAAO,EACP,QAAQ,EACR,gBAAgB,EAChB,aAAa,KAAK,EACI;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAE9D,MAAM,eAAe;QACnB,IAAI,cAAc;YAChB,SAAS;YACT,gBAAgB;YAChB;QACF;IACF;IAEA,MAAM,eAAe;QACnB,gBAAgB;QAChB;IACF;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;;sCACX,8OAAC,iJAAW;4BAAC,WAAU;sCAAc;;;;;;sCACrC,8OAAC;4BAAE,WAAU;;gCAAkC;8CACpC,8OAAC;oCAAK,WAAU;8CAAkB;;;;;;;;;;;;;;;;;;8BAI/C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,8OAAC,0KAAkB;oCACjB,cAAc;oCACd,cAAc;;;;;;;;;;;;sCAIlB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAc;oCACrB,aACG,8FACA;;;;;;;;;;;;;;;;;;8BAKV,8OAAC,kJAAY;oBAAC,WAAU;;sCACtB,8OAAC,4IAAM;4BACL,SAAQ;4BACR,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,8OAAC,4IAAM;4BACL,SAAS;4BACT,UAAU,CAAC;4BACX,WAAU;;8CAEV,8OAAC,gNAAU;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;;;;;;;AAOnD"}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/DepositList.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { Search, Eye, FileText, Calendar, DollarSign, AlertCircle, MoreVertical, Upload } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"../ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"../ui/select\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"../ui/dropdown-menu\";\nimport { DepositStatusBadge } from \"./DepositStatusBadge\";\nimport { UploadProofModal } from \"./UploadProofModal\";\nimport { Deposit } from \"../../types/deposit\";\n\ninterface DepositListProps {\n  deposits: Deposit[];\n  onView: (id: string) => void;\n  onUploadProof?: (depositId: string, file: File) => void;\n  userRole: \"Admin\" | \"Finance\" | \"Staff\" | \"Customer\";\n}\n\nexport function DepositList({ deposits, onView, onUploadProof, userRole }: DepositListProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [uploadModalOpen, setUploadModalOpen] = useState(false);\n  const [selectedDepositForUpload, setSelectedDepositForUpload] = useState<Deposit | null>(null);\n\n  const filteredDeposits = deposits.filter((deposit) => {\n    const matchesSearch =\n      deposit.depositId.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      deposit.invoiceNo.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      deposit.customerName.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus = statusFilter === \"all\" || deposit.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const pendingPaymentCount = deposits.filter((d) => d.status === \"Pending Payment\").length;\n  const pendingApprovalCount = deposits.filter((d) => d.status === \"Pending Approval\").length;\n  const paidCount = deposits.filter((d) => d.status === \"Paid\").length;\n  const paidAmount = deposits\n    .filter((d) => d.status === \"Paid\")\n    .reduce((sum, d) => sum + d.depositAmount, 0);\n\n  // Count overdue deposits\n  const overdueCount = deposits.filter((d) => d.status === \"Overdue\").length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Pending Payment</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-full bg-[#FEF3C7] flex items-center justify-center\">\n                <DollarSign className=\"h-6 w-6 text-[#F59E0B]\" />\n              </div>\n              <div>\n                <p className=\"text-[#111827]\">{pendingPaymentCount}</p>\n                <p className=\"text-[12px] text-[#6B7280]\">Awaiting payment</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Pending Approval</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-full bg-[#DBEAFE] flex items-center justify-center\">\n                <FileText className=\"h-6 w-6 text-[#3B82F6]\" />\n              </div>\n              <div>\n                <p className=\"text-[#111827]\">{pendingApprovalCount}</p>\n                <p className=\"text-[12px] text-[#6B7280]\">Need review</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Paid Deposits</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-full bg-[#D1FAE5] flex items-center justify-center\">\n                <Calendar className=\"h-6 w-6 text-[#059669]\" />\n              </div>\n              <div>\n                <p className=\"text-[#111827]\">{paidCount}</p>\n                <p className=\"text-[12px] text-[#059669]\">RM{paidAmount.toLocaleString()}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Overdue</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-full bg-[#FFEDD5] flex items-center justify-center\">\n                <AlertCircle className=\"h-6 w-6 text-[#EA580C]\" />\n              </div>\n              <div>\n                <p className=\"text-[#111827]\">{overdueCount}</p>\n                <p className=\"text-[12px] text-[#EA580C]\">Payment expired</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex items-center gap-4\">\n        <div className=\"relative flex-1 max-w-[400px]\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#6B7280]\" />\n          <Input\n            placeholder=\"Search by deposit ID, invoice, or customer...\"\n            className=\"pl-10 h-10 bg-white border-[#D1D5DB] rounded-md\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-[200px] h-10 bg-white border-[#D1D5DB] rounded-md\">\n            <SelectValue placeholder=\"Filter by status\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"Pending Payment\">Pending Payment</SelectItem>\n            <SelectItem value=\"Pending Approval\">Pending Approval</SelectItem>\n            <SelectItem value=\"Paid\">Paid</SelectItem>\n            <SelectItem value=\"Rejected\">Rejected</SelectItem>\n            <SelectItem value=\"Overdue\">Overdue</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Table */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <CardTitle className=\"text-[18px]\">Deposit List</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"bg-[#F9FAFB] hover:bg-[#F9FAFB]\">\n                <TableHead>Invoice No.</TableHead>\n                <TableHead>Customer Name</TableHead>\n                <TableHead>Deposit Amount</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Due Date</TableHead>\n                <TableHead>Last Updated</TableHead>\n                <TableHead className=\"text-right\">Action</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredDeposits.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center py-8 text-[#6B7280]\">\n                    No deposits found\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredDeposits.map((deposit) => {\n                  return (\n                    <TableRow key={deposit.id} className=\"h-14 hover:bg-[#F3F4F6]\">\n                      <TableCell className=\"text-[#374151]\">\n                        {deposit.invoiceNo}\n                      </TableCell>\n                      <TableCell className=\"text-[#374151]\">\n                        {deposit.customerName}\n                      </TableCell>\n                      <TableCell className=\"text-[#111827]\">\n                        RM{deposit.depositAmount.toLocaleString()}\n                      </TableCell>\n                      <TableCell>\n                        <DepositStatusBadge status={deposit.status} />\n                      </TableCell>\n                      <TableCell>\n                        <div className={deposit.status === \"Overdue\" ? \"text-[#EA580C]\" : \"text-[#374151]\"}>\n                          {new Date(deposit.dueDate).toLocaleDateString()}\n                        </div>\n                      </TableCell>\n                      <TableCell className=\"text-[#374151]\">\n                        {new Date(deposit.lastUpdated).toLocaleDateString()}\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button variant=\"ghost\" className=\"h-8 w-8 p-0 hover:bg-[#F3F4F6]\">\n                              <MoreVertical className=\"h-4 w-4 text-[#6B7280]\" />\n                            </Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\" className=\"w-[200px]\">\n                            <DropdownMenuItem onClick={() => onView(deposit.id)}>\n                              <Eye className=\"mr-2 h-4 w-4\" />\n                              View Details\n                            </DropdownMenuItem>\n                            {onUploadProof && (deposit.status === \"Pending Payment\" || deposit.status === \"Rejected\") && (() => {\n                              const isBeforeDueDate = new Date() < new Date(deposit.dueDate);\n                              const canUpload = isBeforeDueDate;\n                              \n                              return (\n                                <DropdownMenuItem \n                                  onClick={() => {\n                                    if (canUpload) {\n                                      setSelectedDepositForUpload(deposit);\n                                      setUploadModalOpen(true);\n                                    }\n                                  }}\n                                  disabled={!canUpload}\n                                  className={!canUpload ? \"opacity-50 cursor-not-allowed\" : \"\"}\n                                  title={!canUpload ? \"Cannot upload new proof after due date\" : \"\"}\n                                >\n                                  <Upload className=\"mr-2 h-4 w-4\" />\n                                  {deposit.status === \"Rejected\" ? \"Re-Upload Proof\" : \"Upload Proof\"}\n                                </DropdownMenuItem>\n                              );\n                            })()}\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n\n      {/* Upload Proof Modal */}\n      {uploadModalOpen && selectedDepositForUpload && onUploadProof && (\n        <UploadProofModal\n          open={uploadModalOpen}\n          onClose={() => {\n            setUploadModalOpen(false);\n            setSelectedDepositForUpload(null);\n          }}\n          onSubmit={(file) => {\n            onUploadProof(selectedDepositForUpload.id, file);\n            setUploadModalOpen(false);\n            setSelectedDepositForUpload(null);\n          }}\n          depositInvoiceNo={selectedDepositForUpload.invoiceNo}\n          isReupload={selectedDepositForUpload.status === \"Rejected\"}\n        />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1360, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/ApprovalModal.tsx"],"sourcesContent":["import { CheckCircle } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Label } from \"../ui/label\";\nimport { Input } from \"../ui/input\";\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"../ui/dialog\";\n\ninterface ApprovalModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onApprove: (referenceId: string) => void;\n  depositId: string;\n  customerName: string;\n  amount: number;\n}\n\nexport function ApprovalModal({\n  isOpen,\n  onClose,\n  onApprove,\n  depositId,\n  customerName,\n  amount,\n}: ApprovalModalProps) {\n  const [referenceId, setReferenceId] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleApprove = () => {\n    if (!referenceId.trim()) {\n      setError(\"Reference ID / Transaction ID is required\");\n      return;\n    }\n    onApprove(referenceId);\n    setReferenceId(\"\");\n    setError(\"\");\n    onClose();\n  };\n\n  const handleClose = () => {\n    setReferenceId(\"\");\n    setError(\"\");\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <CheckCircle className=\"h-5 w-5 text-[#059669]\" />\n            Approve Payment\n          </DialogTitle>\n          <DialogDescription>\n            Enter the transaction reference ID to approve this deposit\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"bg-[#F0FDF4] border border-[#BBF7D0] rounded-lg p-4 space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-[14px] text-[#374151]\">Deposit ID:</span>\n              <span className=\"text-[#111827]\">{depositId}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-[14px] text-[#374151]\">Customer:</span>\n              <span className=\"text-[#111827]\">{customerName}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-[14px] text-[#374151]\">Amount:</span>\n              <span className=\"text-[#111827]\">RM{amount.toLocaleString()}</span>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"referenceId\">\n              Reference ID / Transaction ID <span className=\"text-[#DC2626]\">*</span>\n            </Label>\n            <Input\n              id=\"referenceId\"\n              placeholder=\"Enter transaction reference ID\"\n              value={referenceId}\n              onChange={(e) => {\n                setReferenceId(e.target.value);\n                setError(\"\");\n              }}\n              className={error ? \"border-[#DC2626]\" : \"\"}\n            />\n            {error && (\n              <p className=\"text-[14px] text-[#DC2626]\">{error}</p>\n            )}\n          </div>\n\n          <div className=\"bg-[#FFFBEB] border border-[#FDE68A] rounded-lg p-4\">\n            <p className=\"text-[14px] text-[#92400E]\">\n              <strong>Note:</strong> Once approved, this deposit will be marked as PAID and the customer will be notified. This action cannot be undone.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-3\">\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            className=\"h-10 px-6 rounded-lg\"\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleApprove}\n            className=\"bg-[#059669] hover:bg-[#047857] text-white h-10 px-6 rounded-lg\"\n          >\n            Confirm Approval\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAiBO,SAAS,cAAc,EAC5B,MAAM,EACN,OAAO,EACP,SAAS,EACT,SAAS,EACT,YAAY,EACZ,MAAM,EACa;IACnB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,gBAAgB;QACpB,IAAI,CAAC,YAAY,IAAI,IAAI;YACvB,SAAS;YACT;QACF;QACA,UAAU;QACV,eAAe;QACf,SAAS;QACT;IACF;IAEA,MAAM,cAAc;QAClB,eAAe;QACf,SAAS;QACT;IACF;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;;sCACX,8OAAC,iJAAW;4BAAC,WAAU;;8CACrB,8OAAC,0OAAW;oCAAC,WAAU;;;;;;gCAA2B;;;;;;;sCAGpD,8OAAC,uJAAiB;sCAAC;;;;;;;;;;;;8BAKrB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;sDAA6B;;;;;;sDAC7C,8OAAC;4CAAK,WAAU;sDAAkB;;;;;;;;;;;;8CAEpC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;sDAA6B;;;;;;sDAC7C,8OAAC;4CAAK,WAAU;sDAAkB;;;;;;;;;;;;8CAEpC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;sDAA6B;;;;;;sDAC7C,8OAAC;4CAAK,WAAU;;gDAAiB;gDAAG,OAAO,cAAc;;;;;;;;;;;;;;;;;;;sCAI7D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0IAAK;oCAAC,SAAQ;;wCAAc;sDACG,8OAAC;4CAAK,WAAU;sDAAiB;;;;;;;;;;;;8CAEjE,8OAAC,0IAAK;oCACJ,IAAG;oCACH,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC;wCACT,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC7B,SAAS;oCACX;oCACA,WAAW,QAAQ,qBAAqB;;;;;;gCAEzC,uBACC,8OAAC;oCAAE,WAAU;8CAA8B;;;;;;;;;;;;sCAI/C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAc;;;;;;;;;;;;;;;;;;8BAK5B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4IAAM;4BACL,SAAQ;4BACR,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,8OAAC,4IAAM;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 1647, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/RejectionModal.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { XCircle } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Textarea } from \"../ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"../ui/dialog\";\n\ninterface RejectionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onReject: (reason: string) => void;\n  depositId: string;\n}\n\nexport function RejectionModal({\n  isOpen,\n  onClose,\n  onReject,\n  depositId,\n}: RejectionModalProps) {\n  const [reason, setReason] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleReject = () => {\n    if (!reason.trim()) {\n      setError(\"Please provide a reason for rejection\");\n      return;\n    }\n\n    if (reason.trim().length < 10) {\n      setError(\"Rejection reason must be at least 10 characters\");\n      return;\n    }\n\n    onReject(reason);\n    setReason(\"\");\n    setError(\"\");\n    onClose();\n  };\n\n  const handleClose = () => {\n    setReason(\"\");\n    setError(\"\");\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <XCircle className=\"h-5 w-5 text-[#DC2626]\" />\n            Reject Payment\n          </DialogTitle>\n          <DialogDescription>\n            You are about to reject the payment for deposit {depositId}. Please provide a detailed reason.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <label className=\"text-[14px] text-[#374151]\">\n              Rejection Reason <span className=\"text-[#DC2626]\">*</span>\n            </label>\n            <Textarea\n              placeholder=\"Enter detailed reason for rejection (e.g., unclear payment proof, incorrect amount, expired document)...\"\n              value={reason}\n              onChange={(e) => {\n                setReason(e.target.value);\n                setError(\"\");\n              }}\n              className=\"min-h-[150px] border-[#D1D5DB] rounded-md\"\n            />\n            {error && (\n              <p className=\"text-[12px] text-[#DC2626]\">{error}</p>\n            )}\n          </div>\n\n          <div className=\"bg-[#FEF2F2] border border-[#FEE2E2] rounded-lg p-4\">\n            <p className=\"text-[14px] text-[#991B1B]\">\n              <strong>Important:</strong> The customer will be notified of this rejection and can re-upload payment proof. Make sure to provide clear instructions on what needs to be corrected.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-3\">\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            className=\"h-10 px-6 rounded-lg\"\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleReject}\n            className=\"bg-[#DC2626] hover:bg-[#B91C1C] text-white h-10 px-6 rounded-lg\"\n          >\n            Confirm Rejection\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAeO,SAAS,eAAe,EAC7B,MAAM,EACN,OAAO,EACP,QAAQ,EACR,SAAS,EACW;IACpB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe;QACnB,IAAI,CAAC,OAAO,IAAI,IAAI;YAClB,SAAS;YACT;QACF;QAEA,IAAI,OAAO,IAAI,GAAG,MAAM,GAAG,IAAI;YAC7B,SAAS;YACT;QACF;QAEA,SAAS;QACT,UAAU;QACV,SAAS;QACT;IACF;IAEA,MAAM,cAAc;QAClB,UAAU;QACV,SAAS;QACT;IACF;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;;sCACX,8OAAC,iJAAW;4BAAC,WAAU;;8CACrB,8OAAC,uNAAO;oCAAC,WAAU;;;;;;gCAA2B;;;;;;;sCAGhD,8OAAC,uJAAiB;;gCAAC;gCACgC;gCAAU;;;;;;;;;;;;;8BAI/D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;;wCAA6B;sDAC3B,8OAAC;4CAAK,WAAU;sDAAiB;;;;;;;;;;;;8CAEpD,8OAAC,gJAAQ;oCACP,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC;wCACT,UAAU,EAAE,MAAM,CAAC,KAAK;wCACxB,SAAS;oCACX;oCACA,WAAU;;;;;;gCAEX,uBACC,8OAAC;oCAAE,WAAU;8CAA8B;;;;;;;;;;;;sCAI/C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAmB;;;;;;;;;;;;;;;;;;8BAKjC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4IAAM;4BACL,SAAQ;4BACR,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,8OAAC,4IAAM;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 1852, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/DocumentPreviewModal.tsx"],"sourcesContent":["import { X, Download } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"../ui/dialog\";\nimport { DepositDocument } from \"../../types/deposit\";\n\ninterface DocumentPreviewModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  document: DepositDocument;\n  title: string;\n}\n\nexport function DocumentPreviewModal({\n  isOpen,\n  onClose,\n  document,\n  title,\n}: DocumentPreviewModalProps) {\n  const isImage = document.fileType.startsWith('image/');\n  const isPDF = document.fileType === 'application/pdf';\n\n  const handleDownload = () => {\n    // In a real app, this would trigger actual download\n    const link = document.createElement('a');\n    link.href = document.fileUrl;\n    link.download = document.fileName;\n    link.click();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[800px] max-h-[90vh]\">\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle>{title}</DialogTitle>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleDownload}\n                className=\"h-9 px-4 rounded-lg\"\n              >\n                <Download className=\"h-4 w-4 mr-2\" />\n                Download\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClose}\n                className=\"h-9 w-9 p-0\"\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </DialogHeader>\n\n        <div className=\"mt-4\">\n          {isImage && (\n            <div className=\"bg-[#F9FAFB] rounded-lg p-4 flex items-center justify-center min-h-[400px]\">\n              <img\n                src={document.fileUrl}\n                alt={document.fileName}\n                className=\"max-w-full max-h-[600px] object-contain\"\n              />\n            </div>\n          )}\n\n          {isPDF && (\n            <div className=\"bg-[#F9FAFB] rounded-lg p-4\">\n              <iframe\n                src={document.fileUrl}\n                className=\"w-full h-[600px] border-0 rounded\"\n                title={document.fileName}\n              />\n            </div>\n          )}\n\n          <div className=\"mt-4 flex items-center justify-between text-[14px] text-[#6B7280]\">\n            <span>{document.fileName}</span>\n            <span>{(document.fileSize / 1024).toFixed(1)} KB</span>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;;;;;AAeO,SAAS,qBAAqB,EACnC,MAAM,EACN,OAAO,EACP,QAAQ,EACR,KAAK,EACqB;IAC1B,MAAM,UAAU,SAAS,QAAQ,CAAC,UAAU,CAAC;IAC7C,MAAM,QAAQ,SAAS,QAAQ,KAAK;IAEpC,MAAM,iBAAiB;QACrB,oDAAoD;QACpD,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,IAAI,GAAG,SAAS,OAAO;QAC5B,KAAK,QAAQ,GAAG,SAAS,QAAQ;QACjC,KAAK,KAAK;IACZ;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;8BACX,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,iJAAW;0CAAE;;;;;;0CACd,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,4IAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS;wCACT,WAAU;;0DAEV,8OAAC,sNAAQ;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;kDAGvC,8OAAC,4IAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS;wCACT,WAAU;kDAEV,cAAA,8OAAC,iMAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAMrB,8OAAC;oBAAI,WAAU;;wBACZ,yBACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,KAAK,SAAS,OAAO;gCACrB,KAAK,SAAS,QAAQ;gCACtB,WAAU;;;;;;;;;;;wBAKf,uBACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,KAAK,SAAS,OAAO;gCACrB,WAAU;gCACV,OAAO,SAAS,QAAQ;;;;;;;;;;;sCAK9B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAM,SAAS,QAAQ;;;;;;8CACxB,8OAAC;;wCAAM,CAAC,SAAS,QAAQ,GAAG,IAAI,EAAE,OAAO,CAAC;wCAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzD"}},
    {"offset": {"line": 2032, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/DepositDetails.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { ArrowLeft, Download, FileText, Upload, CheckCircle, XCircle, AlertCircle, Calendar, FileSignature } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../ui/card\";\nimport { DepositStatusBadge } from \"./DepositStatusBadge\";\nimport { PaymentProofUpload } from \"./PaymentProofUpload\";\nimport { ApprovalModal } from \"./ApprovalModal\";\nimport { RejectionModal } from \"./RejectionModal\";\nimport { DocumentPreviewModal } from \"./DocumentPreviewModal\";\nimport { Deposit, DepositDocument } from \"../../types/deposit\";\nimport { toast } from \"sonner\";\n\ninterface DepositDetailsProps {\n  deposit: Deposit;\n  onBack: () => void;\n  onSubmitPayment: (depositId: string, file: File) => void;\n  onApprove: (depositId: string, referenceId: string) => void;\n  onReject: (depositId: string) => void;\n  onGenerateNewInvoice: (depositId: string) => void;\n  onPrintReceipt?: (depositId: string) => void;\n  userRole: \"Admin\" | \"Finance\" | \"Staff\" | \"Customer\";\n}\n\nexport function DepositDetails({\n  deposit,\n  onBack,\n  onSubmitPayment,\n  onApprove,\n  onReject,\n  onGenerateNewInvoice,\n  onPrintReceipt,\n  userRole,\n}: DepositDetailsProps) {\n  const [paymentFile, setPaymentFile] = useState<File | null>(null);\n  const [isApprovalModalOpen, setIsApprovalModalOpen] = useState(false);\n  const [isRejectionModalOpen, setIsRejectionModalOpen] = useState(false);\n  const [previewDocument, setPreviewDocument] = useState<{doc: DepositDocument, title: string} | null>(null);\n\n  const canUploadPayment = userRole === \"Customer\" && (deposit.status === \"Pending Payment\" || (deposit.status === \"Rejected\" && !deposit.isOverdue));\n  const canAdminUploadPayment = (userRole === \"Admin\" || userRole === \"Finance\" || userRole === \"Staff\") && (deposit.status === \"Pending Payment\" || deposit.status === \"Rejected\") && !deposit.paymentProof;\n  const canApprove = (userRole === \"Admin\" || userRole === \"Finance\") && deposit.status === \"Pending Approval\";\n  const isCustomerView = userRole === \"Customer\";\n  const isAdminView = userRole === \"Admin\" || userRole === \"Finance\";\n  const isOverdue = deposit.status === \"Overdue\";\n  const isRejected = deposit.status === \"Rejected\";\n  const isBeforeDueDate = new Date() < new Date(deposit.dueDate);\n  const canReupload = isRejected && isBeforeDueDate;\n\n  const handleSubmitPayment = () => {\n    if (!paymentFile) {\n      toast.error(\"Please upload payment proof\");\n      return;\n    }\n    onSubmitPayment(deposit.id, paymentFile);\n    setPaymentFile(null);\n  };\n\n  const handleApprove = (referenceId: string) => {\n    onApprove(deposit.id, referenceId);\n  };\n\n  const handleReject = (reason: string) => {\n    onReject(deposit.id);\n  };\n\n  const handlePreviewDocument = (doc: DepositDocument, title: string) => {\n    setPreviewDocument({ doc, title });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"ghost\" onClick={onBack} className=\"hover:bg-[#F3F4F6]\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back\n          </Button>\n          <div>\n            <div className=\"flex items-center gap-3\">\n              <h1>{deposit.depositId}</h1>\n              <DepositStatusBadge status={deposit.status} />\n            </div>\n            <p className=\"text-[#374151]\">\n              Last updated: {new Date(deposit.lastUpdated).toLocaleString()}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Overdue Warning - Customer View */}\n      {isOverdue && isCustomerView && (\n        <Card className=\"border-[#EA580C] bg-[#FFF7ED]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"h-6 w-6 text-[#EA580C] mt-0.5\" />\n              <div className=\"flex-1\">\n                <p className=\"text-[#EA580C]\">\n                   Payment Overdue\n                </p>\n                <p className=\"text-[14px] text-[#9A3412] mt-2\">\n                  The payment period has expired. You can no longer upload payment proof for this deposit.\n                </p>\n                <p className=\"text-[14px] text-[#6B7280] mt-2\">\n                  Please wait for the admin or finance team to issue a new invoice for this deposit.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Overdue Warning - Admin View */}\n      {isOverdue && isAdminView && (\n        <Card className=\"border-[#EA580C] bg-[#FFF7ED]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-start gap-3 flex-1\">\n                <AlertCircle className=\"h-6 w-6 text-[#EA580C] mt-0.5\" />\n                <div>\n                  <p className=\"text-[#EA580C]\">\n                    Payment Overdue\n                  </p>\n                  <p className=\"text-[14px] text-[#9A3412] mt-1\">\n                    Payment period has expired. Customer cannot upload proof anymore.\n                  </p>\n                  <p className=\"text-[14px] text-[#6B7280] mt-1\">\n                    Generate a new invoice to create a new deposit record for this customer.\n                  </p>\n                </div>\n              </div>\n              <Button\n                onClick={() => onGenerateNewInvoice(deposit.id)}\n                className=\"bg-[#F15929] hover:bg-[#D14620] text-white h-10 px-6 rounded-lg flex-shrink-0\"\n              >\n                <FileSignature className=\"mr-2 h-4 w-4\" />\n                Generate New Invoice\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Admin Approval Actions */}\n      {canApprove && (\n        <Card className=\"border-[#F15929] bg-[#FFF7F5]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-[#231F20]\">\n                  Payment Review Required\n                </p>\n                <p className=\"text-[14px] text-[#6B7280] mt-1\">\n                  Customer has submitted payment proof. Please review and approve or reject.\n                </p>\n              </div>\n              <div className=\"flex gap-3\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setIsRejectionModalOpen(true)}\n                  className=\"h-10 px-6 rounded-lg border-[#DC2626] text-[#DC2626] hover:bg-[#FEF2F2]\"\n                >\n                  <XCircle className=\"mr-2 h-4 w-4\" />\n                  Reject\n                </Button>\n                <Button\n                  onClick={() => setIsApprovalModalOpen(true)}\n                  className=\"bg-[#059669] hover:bg-[#047857] text-white h-10 px-6 rounded-lg\"\n                >\n                  <CheckCircle className=\"mr-2 h-4 w-4\" />\n                  Approve Payment\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Rejection Info */}\n      {deposit.status === \"Rejected\" && deposit.rejectionReason && (\n        <Card className=\"border-[#DC2626] bg-[#FEF2F2]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-start gap-3\">\n              <XCircle className=\"h-5 w-5 text-[#DC2626] mt-0.5\" />\n              <div className=\"flex-1\">\n                <p className=\"text-[#991B1B]\">\n                  Payment Rejected\n                </p>\n                <p className=\"text-[14px] text-[#6B7280] mt-1\">\n                  Rejected by {deposit.rejectedBy || \"Admin\"} on {new Date(deposit.rejectedAt || \"\").toLocaleDateString()}\n                </p>\n                <div className=\"mt-3 p-3 bg-white rounded-lg border border-[#FEE2E2]\">\n                  <p className=\"text-[14px] text-[#111827]\">\n                    <span className=\"text-[#991B1B]\">Reason:</span> {deposit.rejectionReason}\n                  </p>\n                </div>\n                {isCustomerView && (\n                  <p className=\"text-[14px] text-[#6B7280] mt-3\">\n                    Please review the reason above and re-upload the correct payment proof below.\n                  </p>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Paid Status Info */}\n      {deposit.status === \"Paid\" && (\n        <Card className=\"border-[#059669] bg-[#F0FDF4]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <CheckCircle className=\"h-5 w-5 text-[#059669]\" />\n                  <div>\n                    <p className=\"text-[#047857]\">\n                      Payment Approved\n                    </p>\n                    <p className=\"text-[14px] text-[#6B7280] mt-1\">\n                      Approved by {deposit.approvedBy || \"Admin\"} on {new Date(deposit.approvedAt || \"\").toLocaleDateString()}\n                    </p>\n                  </div>\n                </div>\n                {onPrintReceipt && (\n                  <Button\n                    onClick={() => onPrintReceipt(deposit.id)}\n                    className=\"bg-[#F15929] hover:bg-[#D14620] text-white h-10 px-6 rounded-lg\"\n                  >\n                    <FileText className=\"mr-2 h-4 w-4\" />\n                    View Receipt\n                  </Button>\n                )}\n              </div>\n              {(deposit.referenceId || deposit.transactionId) && (\n                <div className=\"bg-white rounded-lg border border-[#BBF7D0] p-4\">\n                  <p className=\"text-[14px] text-[#6B7280]\">Reference / Transaction ID</p>\n                  <p className=\"text-[#111827] mt-1\">\n                    {deposit.referenceId || deposit.transactionId}\n                  </p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Invoice & Agreement Information */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Invoice Information</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Invoice Number</p>\n              <p className=\"text-[#111827]\">{deposit.invoiceNo}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Customer Name</p>\n              <p className=\"text-[#111827]\">{deposit.customerName}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Customer ID</p>\n              <p className=\"text-[#111827]\">{deposit.customerId}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Deposit Amount</p>\n              <p className=\"text-[#111827]\">\n                RM{deposit.depositAmount.toLocaleString()}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Payment Details</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Due Date</p>\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4 text-[#6B7280]\" />\n                <p className={isOverdue ? \"text-[#DC2626]\" : \"text-[#111827]\"}>\n                  {new Date(deposit.dueDate).toLocaleDateString()}\n                  {isOverdue && \" (Overdue)\"}\n                </p>\n              </div>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Current Status</p>\n              <div className=\"mt-2\">\n                <DepositStatusBadge status={deposit.status} />\n              </div>\n            </div>\n            {deposit.paymentSubmittedAt && (\n              <div>\n                <p className=\"text-[14px] text-[#6B7280]\">Payment Submitted</p>\n                <p className=\"text-[#111827]\">\n                  {new Date(deposit.paymentSubmittedAt).toLocaleString()}\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Rental Agreement */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <CardTitle className=\"text-[18px]\">Rental Agreement</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Card className=\"border-[#E5E7EB] bg-[#F9FAFB]\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <FileText className=\"h-10 w-10 text-[#F15929]\" />\n                  <div>\n                    <p className=\"text-[14px] text-[#111827]\">\n                      {deposit.agreementDocument.fileName}\n                    </p>\n                    <p className=\"text-[12px] text-[#6B7280]\">\n                      {(deposit.agreementDocument.fileSize / 1024).toFixed(1)} KB\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handlePreviewDocument(deposit.agreementDocument, \"Rental Agreement\")}\n                    className=\"h-9 px-4 rounded-lg\"\n                  >\n                    View\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"h-9 px-4 rounded-lg\"\n                  >\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Download\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </CardContent>\n      </Card>\n\n      {/* Payment Proof Upload (Admin/Staff View - Pending Payment) */}\n      {canAdminUploadPayment && (\n        <Card className=\"border-[#E5E5E5] bg-white shadow-sm rounded-lg\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Upload Proof of Payment</CardTitle>\n            <p className=\"text-[14px] text-[#6B7280] mt-2\">\n              Upload payment proof such as receipt, bank slip, transfer confirmation, or any supporting evidence\n            </p>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <PaymentProofUpload\n              onFileSelect={setPaymentFile}\n              existingFile={paymentFile}\n            />\n            <div className=\"bg-[#FFFBEB] border border-[#FDE68A] rounded-lg p-3\">\n              <p className=\"text-[14px] text-[#92400E]\">\n                <strong>Note:</strong> Once uploaded, the status will change to \"Pending Approval\" for review.\n              </p>\n            </div>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                onClick={handleSubmitPayment}\n                disabled={!paymentFile}\n                className=\"bg-[#F15929] hover:bg-[#D14620] text-white h-10 px-6 rounded-lg disabled:opacity-50\"\n              >\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Submit Proof of Payment\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Payment Proof Upload (Customer View) */}\n      {canUploadPayment && !isOverdue && (\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Upload Payment Proof</CardTitle>\n            <p className=\"text-[14px] text-[#6B7280] mt-2\">\n              Upload your payment receipt or bank transfer proof to complete this deposit payment\n            </p>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <PaymentProofUpload\n              onFileSelect={setPaymentFile}\n              existingFile={paymentFile}\n            />\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                onClick={handleSubmitPayment}\n                disabled={!paymentFile}\n                className=\"bg-[#F15929] hover:bg-[#D14620] text-white h-10 px-6 rounded-lg disabled:opacity-50\"\n              >\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Submit Payment Proof\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Re-upload for Rejected (Customer View) */}\n      {isCustomerView && deposit.status === \"Rejected\" && !isOverdue && isBeforeDueDate && (\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Re-upload Payment Proof</CardTitle>\n            <p className=\"text-[14px] text-[#6B7280] mt-2\">\n              Please upload the correct payment proof based on the rejection reason above\n            </p>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <PaymentProofUpload\n              onFileSelect={setPaymentFile}\n              existingFile={paymentFile}\n            />\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                onClick={handleSubmitPayment}\n                disabled={!paymentFile}\n                className=\"bg-[#F15929] hover:bg-[#D14620] text-white h-10 px-6 rounded-lg disabled:opacity-50\"\n              >\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Submit for Re-Approval\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Rejected After Due Date Warning (Customer View) */}\n      {isCustomerView && deposit.status === \"Rejected\" && !isBeforeDueDate && (\n        <Card className=\"border-[#DC2626] bg-[#FEF2F2]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"h-6 w-6 text-[#DC2626] mt-0.5\" />\n              <div className=\"flex-1\">\n                <p className=\"text-[#DC2626]\">\n                  Cannot Re-Upload After Due Date\n                </p>\n                <p className=\"text-[14px] text-[#991B1B] mt-2\">\n                  This deposit can no longer be re-submitted after the due date ({new Date(deposit.dueDate).toLocaleDateString()}).\n                </p>\n                <p className=\"text-[14px] text-[#6B7280] mt-2\">\n                  Please contact the admin or finance team for assistance.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Payment Proof (Submitted - View Only) */}\n      {deposit.paymentProof && (\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Payment Proof</CardTitle>\n            <p className=\"text-[14px] text-[#6B7280] mt-2\">\n              Submitted on {new Date(deposit.paymentSubmittedAt || \"\").toLocaleString()}\n            </p>\n          </CardHeader>\n          <CardContent>\n            <Card className=\"border-[#E5E7EB] bg-[#F9FAFB]\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <FileText className=\"h-10 w-10 text-[#3B82F6]\" />\n                    <div>\n                      <p className=\"text-[14px] text-[#111827]\">\n                        {deposit.paymentProof.fileName}\n                      </p>\n                      <p className=\"text-[12px] text-[#6B7280]\">\n                        {(deposit.paymentProof.fileSize / 1024).toFixed(1)} KB\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handlePreviewDocument(deposit.paymentProof!, \"Payment Proof\")}\n                      className=\"h-9 px-4 rounded-lg\"\n                    >\n                      View\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"h-9 px-4 rounded-lg\"\n                    >\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Download\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Linked Invoice Info (for Overdue deposits) */}\n      {deposit.linkedToNewInvoice && (\n        <Card className=\"border-[#E5E7EB] bg-[#F0FDF4]\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-3\">\n              <CheckCircle className=\"h-5 w-5 text-[#059669]\" />\n              <div>\n                <p className=\"text-[#047857]\">\n                  New Invoice Generated\n                </p>\n                <p className=\"text-[14px] text-[#6B7280] mt-1\">\n                  This overdue deposit has been linked to new invoice: <span className=\"text-[#111827]\">{deposit.linkedToNewInvoice}</span>\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Modals */}\n      <ApprovalModal\n        isOpen={isApprovalModalOpen}\n        onClose={() => setIsApprovalModalOpen(false)}\n        onApprove={handleApprove}\n        depositId={deposit.depositId}\n        customerName={deposit.customerName}\n        amount={deposit.depositAmount}\n      />\n\n      <RejectionModal\n        isOpen={isRejectionModalOpen}\n        onClose={() => setIsRejectionModalOpen(false)}\n        onReject={handleReject}\n        depositId={deposit.depositId}\n      />\n\n      {previewDocument && (\n        <DocumentPreviewModal\n          isOpen={true}\n          onClose={() => setPreviewDocument(null)}\n          document={previewDocument.doc}\n          title={previewDocument.title}\n        />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3615, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/DepositReceiptPrint.tsx"],"sourcesContent":["import { useRef } from 'react';\nimport { X, Printer, CheckCircle } from 'lucide-react';\nimport { Button } from '../ui/button';\nimport { Card, CardContent } from '../ui/card';\nimport { Deposit } from '../../types/deposit';\nimport { Badge } from '../ui/badge';\n\ninterface DepositReceiptPrintProps {\n  deposit: Deposit;\n  onBack: () => void;\n}\n\nexport function DepositReceiptPrint({ deposit, onBack }: DepositReceiptPrintProps) {\n  const printRef = useRef<HTMLDivElement>(null);\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  const subtotal = deposit.rentalItems?.reduce((sum, item) => sum + item.totalPrice, 0) || deposit.depositAmount;\n\n  return (\n    <div className=\"p-6\">\n      {/* Action Buttons - Hidden on Print */}\n      <div className=\"flex justify-between items-center mb-6 print:hidden\">\n        <h1 className=\"text-[#231F20]\">Deposit Receipt - Print Preview</h1>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={onBack}>\n            <X className=\"size-4 mr-2\" />\n            Close\n          </Button>\n          <Button onClick={handlePrint} className=\"bg-[#F15929] hover:bg-[#d94d1f]\">\n            <Printer className=\"size-4 mr-2\" />\n            Print\n          </Button>\n        </div>\n      </div>\n\n      {/* Printable Receipt */}\n      <Card className=\"max-w-4xl mx-auto\">\n        <CardContent className=\"p-12\" ref={printRef}>\n          {/* Header */}\n          <div className=\"border-b-4 border-[#F15929] pb-6 mb-6\">\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h1 className=\"text-[#231F20] mb-2\">POWER METAL & STEEL</h1>\n                <p className=\"text-sm text-gray-600\">Scaffolding Equipment Supplier</p>\n                <p className=\"text-sm text-gray-600 mt-2\">\n                  123 Industrial Park, Johor Bahru<br />\n                  Johor, Malaysia 81200<br />\n                  Tel: +60 12-345 6789<br />\n                  Email: info@powermetalsteel.com\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <h2 className=\"text-[#231F20] mb-4\">DEPOSIT RECEIPT</h2>\n                <div className=\"text-sm space-y-1\">\n                  <p><strong>Receipt No:</strong> {deposit.depositReceipt?.receiptNumber || 'RCP-' + deposit.depositId}</p>\n                  <p><strong>Receipt Date:</strong> {deposit.depositReceipt?.receiptDate ? new Date(deposit.depositReceipt.receiptDate).toLocaleDateString() : new Date().toLocaleDateString()}</p>\n                  <p><strong>Invoice No:</strong> {deposit.invoiceNo}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Status Badge */}\n          <div className=\"mb-6 flex items-center gap-3\">\n            <CheckCircle className=\"size-6 text-green-600\" />\n            <Badge className=\"bg-green-100 text-green-800 px-4 py-2 text-base\">\n              PAID\n            </Badge>\n          </div>\n\n          {/* Customer Information */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-sm text-gray-600 mb-2\">CUSTOMER DETAILS:</h3>\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <p className=\"text-[#231F20]\"><strong>Name:</strong> {deposit.customerName}</p>\n              <p className=\"text-sm text-gray-600 mt-1\"><strong>Customer ID:</strong> {deposit.customerId}</p>\n            </div>\n          </div>\n\n          {/* Rental Items Table */}\n          {deposit.rentalItems && deposit.rentalItems.length > 0 && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm text-gray-600 mb-3\">RENTAL ITEM DETAILS:</h3>\n              <table className=\"w-full border-collapse\">\n                <thead>\n                  <tr className=\"border-b-2 border-gray-300\">\n                    <th className=\"text-left py-3 px-2 text-sm text-[#231F20]\">Item Name</th>\n                    <th className=\"text-right py-3 px-2 text-sm text-[#231F20]\">Quantity</th>\n                    <th className=\"text-right py-3 px-2 text-sm text-[#231F20]\">Unit Price (RM)</th>\n                    <th className=\"text-right py-3 px-2 text-sm text-[#231F20]\">Total Price (RM)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {deposit.rentalItems.map((item) => (\n                    <tr key={item.id} className=\"border-b border-gray-200\">\n                      <td className=\"py-3 px-2 text-sm\">{item.itemName}</td>\n                      <td className=\"py-3 px-2 text-sm text-right\">{item.quantity}</td>\n                      <td className=\"py-3 px-2 text-sm text-right\">{item.unitPrice.toFixed(2)}</td>\n                      <td className=\"py-3 px-2 text-sm text-right\">{item.totalPrice.toFixed(2)}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Deposit Summary */}\n          <div className=\"flex justify-end mb-8\">\n            <div className=\"w-80 space-y-3\">\n              <div className=\"flex justify-between pb-2\">\n                <span className=\"text-sm text-gray-600\">Subtotal:</span>\n                <span className=\"text-sm text-[#231F20]\">RM {subtotal.toFixed(2)}</span>\n              </div>\n              <div className=\"flex justify-between pt-2 border-t-2 border-gray-300\">\n                <span className=\"text-[#231F20]\">Deposit Amount Paid:</span>\n                <span className=\"text-[#F15929]\">RM {deposit.depositAmount.toFixed(2)}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Payment Information */}\n          <div className=\"mb-8 p-4 bg-green-50 rounded-lg border-2 border-green-200\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Payment Status:</p>\n                <p className=\"text-green-600 mt-1\">PAID</p>\n              </div>\n              {deposit.approvedBy && (\n                <div>\n                  <p className=\"text-sm text-gray-600\">Approved By:</p>\n                  <p className=\"text-sm text-[#231F20] mt-1\">{deposit.approvedBy}</p>\n                </div>\n              )}\n              {deposit.approvedAt && (\n                <div>\n                  <p className=\"text-sm text-gray-600\">Approved On:</p>\n                  <p className=\"text-sm text-[#231F20] mt-1\">\n                    {new Date(deposit.approvedAt).toLocaleDateString()}\n                  </p>\n                </div>\n              )}\n              {deposit.paymentSubmittedAt && (\n                <div>\n                  <p className=\"text-sm text-gray-600\">Payment Submitted:</p>\n                  <p className=\"text-sm text-[#231F20] mt-1\">\n                    {new Date(deposit.paymentSubmittedAt).toLocaleDateString()}\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Official Notes */}\n          <div className=\"mb-8 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n            <p className=\"text-sm text-blue-900\">\n              <strong>Official Note:</strong> This receipt is generated upon confirmation of deposit payment.\n            </p>\n          </div>\n\n          {/* Footer */}\n          <div className=\"pt-8 border-t border-gray-300\">\n            <div className=\"text-center text-sm text-gray-500\">\n              <p>Thank you for your business</p>\n              <p className=\"mt-2\">\n                This is a computer-generated document. No signature is required.\n              </p>\n            </div>\n          </div>\n\n          {/* Terms & Conditions */}\n          <div className=\"mt-8 pt-6 border-t border-gray-200\">\n            <h4 className=\"text-xs text-gray-600 mb-2\">TERMS & CONDITIONS:</h4>\n            <ul className=\"text-xs text-gray-500 space-y-1\">\n              <li> This deposit is refundable upon return of equipment in good condition.</li>\n              <li> Deposit will be forfeited if equipment is not returned within the agreed period.</li>\n              <li> Any damage to equipment will be deducted from the deposit amount.</li>\n              <li> Refund processing may take 7-14 business days after equipment inspection.</li>\n            </ul>\n          </div>\n\n          {/* Company Footer */}\n          <div className=\"mt-8 pt-4 border-t border-gray-300 text-center\">\n            <p className=\"text-xs text-gray-500\">\n              Power Metal & Steel | www.powermetalsteel.com | Customer Service: +60 12-345 6789\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <style>{`\n        @media print {\n          body * {\n            visibility: hidden;\n          }\n          ${printRef.current ? '#print-area, #print-area *' : ''} {\n            visibility: visible;\n          }\n          .print\\\\:hidden {\n            display: none !important;\n          }\n          @page {\n            margin: 1cm;\n            size: A4;\n          }\n        }\n      `}</style>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4414, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/deposits/ManageDepositFlow.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { DepositList } from \"./DepositList\";\nimport { DepositDetails } from \"./DepositDetails\";\nimport { DepositReceiptPrint } from \"./DepositReceiptPrint\";\nimport { Deposit, DepositDocument, DepositReceipt, RentalItem } from \"../../types/deposit\";\nimport { toast } from \"sonner\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"../ui/alert-dialog\";\nimport { CheckCircle } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { FileText } from \"lucide-react\";\nimport { RotateCcw } from \"lucide-react\";\n\ntype View = \"list\" | \"details\" | \"receipt\";\n\n// Mock data - in a real app, this would come from an API\nconst initialDeposits: Deposit[] = [\n  {\n    id: \"7\",\n    depositId: \"DEP-2024-007\",\n    invoiceNo: \"INV-2024-051\",\n    customerName: \"Sunrise Holdings\",\n    customerId: \"CUST-007\",\n    agreementDocument: {\n      id: \"doc-7\",\n      fileName: \"rental_agreement_sunrise.pdf\",\n      fileUrl: \"#\",\n      fileSize: 485632,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-12-05T08:20:00Z\",\n    },\n    depositAmount: 10800,\n    status: \"Pending Payment\",\n    dueDate: \"2025-12-25\",\n    lastUpdated: \"2024-12-09T08:15:00Z\",\n    createdAt: \"2024-12-05T08:20:00Z\",\n  },\n  {\n    id: \"3\",\n    depositId: \"DEP-2024-003\",\n    invoiceNo: \"INV-2024-047\",\n    customerName: \"Metro Builders\",\n    customerId: \"CUST-003\",\n    agreementDocument: {\n      id: \"doc-3\",\n      fileName: \"rental_agreement_metro.pdf\",\n      fileUrl: \"#\",\n      fileSize: 498688,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-11-08T14:00:00Z\",\n    },\n    depositAmount: 18500,\n    status: \"Pending Payment\",\n    dueDate: \"2025-12-25\",\n    lastUpdated: \"2024-12-09T10:30:00Z\",\n    createdAt: \"2024-11-08T14:00:00Z\",\n  },\n  {\n    id: \"1\",\n    depositId: \"DEP-2024-001\",\n    invoiceNo: \"INV-2024-045\",\n    customerName: \"Acme Construction Ltd.\",\n    customerId: \"CUST-001\",\n    agreementDocument: {\n      id: \"doc-1\",\n      fileName: \"rental_agreement_acme.pdf\",\n      fileUrl: \"#\",\n      fileSize: 524288,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-11-01T09:00:00Z\",\n    },\n    depositAmount: 15000,\n    status: \"Paid\",\n    dueDate: \"2024-11-15\",\n    lastUpdated: \"2024-11-10T14:30:00Z\",\n    createdAt: \"2024-11-01T09:00:00Z\",\n    paymentProof: {\n      id: \"proof-1\",\n      fileName: \"payment_receipt_acme.jpg\",\n      fileUrl: \"#\",\n      fileSize: 245600,\n      fileType: \"image/jpeg\",\n      uploadedAt: \"2024-11-08T10:15:00Z\",\n    },\n    paymentSubmittedAt: \"2024-11-08T10:15:00Z\",\n    approvedBy: \"Jane Doe (Finance Manager)\",\n    approvedAt: \"2024-11-10T14:30:00Z\",\n    referenceId: \"TXN-2024-ACM-15000\",\n    rentalItems: [\n      {\n        id: 'dep-item-1',\n        itemName: 'Standard Frame 1.8m x 1.2m',\n        quantity: 50,\n        unitPrice: 15.00,\n        totalPrice: 750.00,\n      },\n      {\n        id: 'dep-item-2',\n        itemName: 'Cross Brace 1.8m',\n        quantity: 100,\n        unitPrice: 8.00,\n        totalPrice: 800.00,\n      },\n      {\n        id: 'dep-item-3',\n        itemName: 'Base Jack (Adjustable)',\n        quantity: 60,\n        unitPrice: 12.00,\n        totalPrice: 720.00,\n      },\n    ],\n    depositReceipt: {\n      id: 'rcpt-1',\n      receiptNumber: 'RCP-DEP-2024-001',\n      receiptDate: '2024-11-10T14:30:00Z',\n      generatedAt: '2024-11-10T14:30:00Z',\n    },\n  },\n  {\n    id: \"2\",\n    depositId: \"DEP-2024-002\",\n    invoiceNo: \"INV-2024-046\",\n    customerName: \"BuildRight Inc.\",\n    customerId: \"CUST-002\",\n    agreementDocument: {\n      id: \"doc-2\",\n      fileName: \"rental_agreement_buildright.pdf\",\n      fileUrl: \"#\",\n      fileSize: 612352,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-11-05T11:20:00Z\",\n    },\n    depositAmount: 22000,\n    status: \"Pending Approval\",\n    dueDate: \"2024-11-20\",\n    lastUpdated: \"2024-11-12T09:45:00Z\",\n    createdAt: \"2024-11-05T11:20:00Z\",\n    paymentProof: {\n      id: \"proof-2\",\n      fileName: \"bank_transfer_proof.pdf\",\n      fileUrl: \"#\",\n      fileSize: 189440,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-11-12T09:45:00Z\",\n    },\n    paymentSubmittedAt: \"2024-11-12T09:45:00Z\",\n  },\n  {\n    id: \"4\",\n    depositId: \"DEP-2024-004\",\n    invoiceNo: \"INV-2024-048\",\n    customerName: \"Premium Projects\",\n    customerId: \"CUST-004\",\n    agreementDocument: {\n      id: \"doc-4\",\n      fileName: \"rental_agreement_premium.pdf\",\n      fileUrl: \"#\",\n      fileSize: 551936,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-11-10T16:30:00Z\",\n    },\n    depositAmount: 12750,\n    status: \"Rejected\",\n    dueDate: \"2024-11-18\",\n    lastUpdated: \"2024-11-15T11:20:00Z\",\n    createdAt: \"2024-11-10T16:30:00Z\",\n    paymentProof: {\n      id: \"proof-4\",\n      fileName: \"payment_screenshot.jpg\",\n      fileUrl: \"#\",\n      fileSize: 152600,\n      fileType: \"image/jpeg\",\n      uploadedAt: \"2024-11-14T08:30:00Z\",\n    },\n    paymentSubmittedAt: \"2024-11-14T08:30:00Z\",\n    rejectedBy: \"Robert Lee (Admin)\",\n    rejectedAt: \"2024-11-15T11:20:00Z\",\n    rejectionReason: \"The payment proof image is unclear and the transaction details are not visible. Please upload a clearer image showing the full transaction details including date, amount, and reference number.\",\n  },\n  {\n    id: \"5\",\n    depositId: \"DEP-2024-005\",\n    invoiceNo: \"INV-2024-049\",\n    customerName: \"Steel Masters Co.\",\n    customerId: \"CUST-005\",\n    agreementDocument: {\n      id: \"doc-5\",\n      fileName: \"rental_agreement_steelmasters.pdf\",\n      fileUrl: \"#\",\n      fileSize: 478208,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-11-02T10:00:00Z\",\n    },\n    depositAmount: 31200,\n    status: \"Pending Payment\",\n    dueDate: \"2024-11-27\",\n    lastUpdated: \"2024-11-02T10:00:00Z\",\n    createdAt: \"2024-11-02T10:00:00Z\",\n  },\n  {\n    id: \"6\",\n    depositId: \"DEP-2024-006\",\n    invoiceNo: \"INV-2024-050\",\n    customerName: \"Urban Construction\",\n    customerId: \"CUST-006\",\n    agreementDocument: {\n      id: \"doc-6\",\n      fileName: \"rental_agreement_urban.pdf\",\n      fileUrl: \"#\",\n      fileSize: 522240,\n      fileType: \"application/pdf\",\n      uploadedAt: \"2024-10-28T13:15:00Z\",\n    },\n    depositAmount: 9500,\n    status: \"Pending Payment\",\n    dueDate: \"2024-11-10\",\n    lastUpdated: \"2024-10-28T13:15:00Z\",\n    createdAt: \"2024-10-28T13:15:00Z\",\n  },\n];\n\ninterface ManageDepositFlowProps {\n  userRole?: \"Admin\" | \"Finance\" | \"Staff\" | \"Customer\";\n}\n\nexport function ManageDepositFlow({ userRole = \"Admin\" }: ManageDepositFlowProps) {\n  const [currentView, setCurrentView] = useState<View>(\"list\");\n  const [deposits, setDeposits] = useState<Deposit[]>(initialDeposits);\n  const [selectedDepositId, setSelectedDepositId] = useState<string | null>(null);\n  const [showGenerateInvoiceDialog, setShowGenerateInvoiceDialog] = useState(false);\n  const [depositToGenerateInvoice, setDepositToGenerateInvoice] = useState<string | null>(null);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [approvedDepositId, setApprovedDepositId] = useState<string | null>(null);\n\n  // Load from localStorage on mount\n  useEffect(() => {\n    const stored = localStorage.getItem(\"deposits\");\n    if (stored) {\n      try {\n        const parsedDeposits = JSON.parse(stored);\n        // Only use stored data if it has the same structure\n        if (parsedDeposits && parsedDeposits.length > 0) {\n          setDeposits(parsedDeposits);\n        } else {\n          // Reset to initial if stored data is invalid\n          setDeposits(initialDeposits);\n        }\n      } catch (e) {\n        console.error(\"Failed to load deposits from storage\");\n        setDeposits(initialDeposits);\n      }\n    } else {\n      // No stored data, use initial\n      setDeposits(initialDeposits);\n    }\n  }, []);\n\n  // Save to localStorage when deposits change\n  useEffect(() => {\n    localStorage.setItem(\"deposits\", JSON.stringify(deposits));\n  }, [deposits]);\n\n  // Check for overdue deposits automatically\n  useEffect(() => {\n    const checkOverdue = () => {\n      const now = new Date();\n      now.setHours(0, 0, 0, 0);\n      \n      const updatedDeposits = deposits.map((deposit) => {\n        if (deposit.status === \"Pending Payment\" && !deposit.paymentProof) {\n          const dueDate = new Date(deposit.dueDate);\n          dueDate.setHours(0, 0, 0, 0);\n          \n          if (dueDate < now) {\n            return {\n              ...deposit,\n              status: \"Overdue\" as const,\n              isOverdue: true,\n              lastUpdated: new Date().toISOString(),\n            };\n          }\n        }\n        return deposit;\n      });\n\n      // Check if any deposits were updated\n      const hasChanges = updatedDeposits.some((d, i) => d.status !== deposits[i].status);\n      if (hasChanges) {\n        setDeposits(updatedDeposits);\n      }\n    };\n\n    // Check immediately\n    checkOverdue();\n\n    // Check every minute\n    const interval = setInterval(checkOverdue, 60000);\n    return () => clearInterval(interval);\n  }, [deposits]);\n\n  const selectedDeposit = selectedDepositId\n    ? deposits.find((d) => d.id === selectedDepositId)\n    : null;\n\n  const handleView = (id: string) => {\n    setSelectedDepositId(id);\n    setCurrentView(\"details\");\n  };\n\n  const handleBack = () => {\n    setCurrentView(\"list\");\n    setSelectedDepositId(null);\n  };\n\n  const handleSubmitPayment = (depositId: string, file: File) => {\n    const now = new Date().toISOString();\n\n    // Create mock document from file\n    const paymentProof: DepositDocument = {\n      id: `proof-${Date.now()}`,\n      fileName: file.name,\n      fileUrl: URL.createObjectURL(file),\n      fileSize: file.size,\n      fileType: file.type,\n      uploadedAt: now,\n    };\n\n    setDeposits(\n      deposits.map((d) =>\n        d.id === depositId\n          ? {\n              ...d,\n              status: \"Pending Approval\",\n              paymentProof,\n              paymentSubmittedAt: now,\n              lastUpdated: now,\n              // Clear rejection info if re-uploading\n              rejectedBy: undefined,\n              rejectedAt: undefined,\n              rejectionReason: undefined,\n            }\n          : d\n      )\n    );\n\n    const deposit = deposits.find(d => d.id === depositId);\n    if (deposit?.status === \"Rejected\") {\n      toast.success(\"Payment proof re-submitted for approval\");\n    } else {\n      toast.success(\"Payment proof submitted successfully\");\n    }\n    setCurrentView(\"list\");\n  };\n\n  const handleApprove = (depositId: string, referenceId: string) => {\n    const now = new Date().toISOString();\n    \n    // Generate deposit receipt\n    const receiptNumber = `RCP-${deposits.find(d => d.id === depositId)?.depositId || 'DEP-XXXX'}`;\n    const depositReceipt: DepositReceipt = {\n      id: `rcpt-${Date.now()}`,\n      receiptNumber,\n      receiptDate: now,\n      generatedAt: now,\n    };\n    \n    setDeposits(\n      deposits.map((d) =>\n        d.id === depositId\n          ? {\n              ...d,\n              status: \"Paid\",\n              approvedBy: \"Current User (Admin)\",\n              approvedAt: now,\n              lastUpdated: now,\n              referenceId: referenceId,\n              depositReceipt,\n            }\n          : d\n      )\n    );\n    toast.success(\"Payment approved successfully\");\n    setApprovedDepositId(depositId);\n    setShowSuccessModal(true);\n    setCurrentView(\"list\");\n  };\n\n  const handleReject = (depositId: string, reason: string) => {\n    const now = new Date().toISOString();\n    setDeposits(\n      deposits.map((d) =>\n        d.id === depositId\n          ? {\n              ...d,\n              status: \"Rejected\",\n              rejectedBy: \"Current User (Admin)\",\n              rejectedAt: now,\n              rejectionReason: reason,\n              lastUpdated: now,\n            }\n          : d\n      )\n    );\n    toast.error(\"Payment rejected\");\n    setCurrentView(\"list\");\n  };\n\n  const handleGenerateNewInvoice = (depositId: string) => {\n    setDepositToGenerateInvoice(depositId);\n    setShowGenerateInvoiceDialog(true);\n  };\n\n  const confirmGenerateInvoice = () => {\n    if (!depositToGenerateInvoice) return;\n\n    const deposit = deposits.find((d) => d.id === depositToGenerateInvoice);\n    if (!deposit) return;\n\n    // Generate new invoice number\n    const newInvoiceNo = `INV-2024-${String(Date.now()).slice(-3)}`;\n\n    // Update the old deposit to link to new invoice\n    setDeposits(\n      deposits.map((d) =>\n        d.id === depositToGenerateInvoice\n          ? {\n              ...d,\n              linkedToNewInvoice: newInvoiceNo,\n              lastUpdated: new Date().toISOString(),\n            }\n          : d\n      )\n    );\n\n    // In a real app, this would create a new invoice and deposit record\n    toast.success(`New invoice ${newInvoiceNo} generated successfully`);\n    setShowGenerateInvoiceDialog(false);\n    setDepositToGenerateInvoice(null);\n    setCurrentView(\"list\");\n  };\n\n  const handlePrintReceipt = (depositId: string) => {\n    setSelectedDepositId(depositId);\n    setCurrentView(\"receipt\");\n  };\n\n  const handleResetData = () => {\n    localStorage.removeItem(\"deposits\");\n    setDeposits(initialDeposits);\n    toast.success(\"Data reset to sample deposits\");\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header - only show on list view */}\n      {currentView === \"list\" && (\n        <div className=\"flex items-center justify-between\">\n          <div className=\"space-y-2\">\n            <h1>Manage Deposits</h1>\n            <p className=\"text-[#374151]\">\n              Track and manage deposit payments, rental agreements, and payment approvals\n            </p>\n          </div>\n          <Button\n            onClick={handleResetData}\n            variant=\"outline\"\n            className=\"border-[#D1D5DB] text-[#374151] hover:bg-[#F3F4F6]\"\n          >\n            <RotateCcw className=\"mr-2 h-4 w-4\" />\n            Reset Sample Data\n          </Button>\n        </div>\n      )}\n\n      {/* Content */}\n      {currentView === \"list\" && (\n        <DepositList\n          deposits={deposits}\n          onView={handleView}\n          onUploadProof={handleSubmitPayment}\n          userRole={userRole}\n        />\n      )}\n\n      {currentView === \"details\" && selectedDeposit && (\n        <DepositDetails\n          deposit={selectedDeposit}\n          onBack={handleBack}\n          onSubmitPayment={handleSubmitPayment}\n          onApprove={handleApprove}\n          onReject={handleReject}\n          onGenerateNewInvoice={handleGenerateNewInvoice}\n          onPrintReceipt={handlePrintReceipt}\n          userRole={userRole}\n        />\n      )}\n\n      {currentView === \"receipt\" && selectedDeposit && (\n        <DepositReceiptPrint\n          deposit={selectedDeposit}\n          onBack={handleBack}\n        />\n      )}\n\n      {/* Generate New Invoice Dialog */}\n      <AlertDialog open={showGenerateInvoiceDialog} onOpenChange={setShowGenerateInvoiceDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Generate New Invoice</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will create a new invoice for the overdue deposit. The current deposit record will remain as \"Overdue\" for historical tracking, and a new deposit record will be created for the customer.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmGenerateInvoice}\n              className=\"bg-[#F15929] hover:bg-[#D14620] text-white\"\n            >\n              Generate Invoice\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Success Modal */}\n      <AlertDialog open={showSuccessModal} onOpenChange={setShowSuccessModal}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"size-12 rounded-full bg-green-100 flex items-center justify-center\">\n                <CheckCircle className=\"size-6 text-green-600\" />\n              </div>\n              <div>\n                <AlertDialogTitle>Payment Approved</AlertDialogTitle>\n              </div>\n            </div>\n            <AlertDialogDescription className=\"space-y-2\">\n              <p>A deposit receipt has been automatically generated and attached to this record.</p>\n              <p className=\"text-sm text-gray-500\">You can now view and print the deposit receipt.</p>\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogAction\n              onClick={() => {\n                setShowSuccessModal(false);\n                if (approvedDepositId) {\n                  handlePrintReceipt(approvedDepositId);\n                }\n              }}\n              className=\"bg-[#F15929] hover:bg-[#D14620] text-white\"\n            >\n              <FileText className=\"size-4 mr-2\" />\n              View Receipt\n            </AlertDialogAction>\n            <AlertDialogAction\n              onClick={() => setShowSuccessModal(false)}\n              className=\"bg-gray-500 hover:bg-gray-600 text-white\"\n            >\n              Close\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}