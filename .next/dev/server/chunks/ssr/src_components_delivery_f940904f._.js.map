{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/delivery/DeliveryWorkflow.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport {\n  ArrowLeft, Save, Check, PackageCheck, Calendar as CalendarIcon,\n  ClipboardCheck, Truck, FileSignature, Upload, X, Image as ImageIcon,\n  ArrowRight, User, Phone, MapPin, AlertCircle, Download, FileText, CheckCircle2,\n  Loader2\n} from 'lucide-react';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Label } from '../ui/label';\nimport { Textarea } from '../ui/textarea';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Badge } from '../ui/badge';\nimport { RadioGroup, RadioGroupItem } from '../ui/radio-group';\nimport { Calendar } from '../ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '../ui/popover';\nimport { toast } from 'sonner';\nimport { format } from 'date-fns';\nimport { DeliveryOrder, DeliveryItem } from './DeliveryManagement';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '../ui/dialog';\n\ninterface DeliveryWorkflowProps {\n  delivery: DeliveryOrder | null;\n  onSave: (delivery: DeliveryOrder) => void;\n  onBack: () => void;\n}\n\nconst TIME_SLOTS = [\n  '09:00 - 12:00',\n  '12:00 - 15:00',\n  '15:00 - 18:00',\n];\n\nexport function DeliveryWorkflow({ delivery, onSave, onBack }: DeliveryWorkflowProps) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [formData, setFormData] = useState<Partial<DeliveryOrder>>(delivery || {\n    items: [],\n    status: 'pending',\n    type: 'delivery',\n    createdBy: 'Current User',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  });\n\n  const [stockCheckNotes, setStockCheckNotes] = useState('');\n  const [scheduledDate, setScheduledDate] = useState<Date>();\n  const [scheduleTimeSlot, setScheduleTimeSlot] = useState('');\n  const [packingPhotos, setPackingPhotos] = useState<string[]>([]);\n  const [deliveryPhotos, setDeliveryPhotos] = useState<string[]>([]);\n  const [isSignatureDialogOpen, setIsSignatureDialogOpen] = useState(false);\n  const [signatureType, setSignatureType] = useState<'driver' | 'customer'>('customer');\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // OTP states for customer acknowledgement\n  const [otpSent, setOtpSent] = useState(false);\n  const [otpInput, setOtpInput] = useState('');\n  const [generatedOtp, setGeneratedOtp] = useState('');\n  const [customerName, setCustomerName] = useState('');\n  const [isDOViewerOpen, setIsDOViewerOpen] = useState(false);\n\n  useEffect(() => {\n    if (delivery) {\n      setFormData(delivery);\n      // Set current step based on status\n      const statusToStep: Record<DeliveryOrder['status'], number> = {\n        pending: 1,\n        packing_list_issued: 2,\n        stock_checked: 3,\n        packing_loading: 4,\n        in_transit: 4,\n        ready_for_pickup: 4,\n        completed: 5,\n      };\n      setCurrentStep(statusToStep[delivery.status] || 1);\n      \n      // Pre-fill scheduled date from delivery order (already confirmed from delivery request page)\n      if (delivery.scheduledDate) {\n        setScheduledDate(new Date(delivery.scheduledDate));\n      }\n      if (delivery.scheduledTimeSlot) {\n        setScheduleTimeSlot(delivery.scheduledTimeSlot);\n      }\n    }\n  }, [delivery]);\n\n  // Steps depend on delivery type\n  const getSteps = () => {\n    const baseSteps = [\n      { number: 1, title: 'Generate Packing List' },\n      { number: 2, title: 'Check Stock' },\n      { number: 3, title: 'Packing & Loading' },\n    ];\n\n    if (formData.type === 'delivery') {\n      return [\n        ...baseSteps,\n        { number: 4, title: 'In Transit & Sign' },\n        { number: 5, title: 'Complete' },\n      ];\n    } else {\n      return [\n        ...baseSteps,\n        { number: 4, title: 'Ready & Sign' },\n        { number: 5, title: 'Complete' },\n      ];\n    }\n  };\n\n  const steps = getSteps();\n\n  const handleGeneratePackingList = () => {\n    if (!formData.items || formData.items.length === 0) {\n      toast.error('No items to pack');\n      return;\n    }\n\n    const plNumber = `PL-${Date.now().toString().slice(-8)}`;\n    \n    setFormData({\n      ...formData,\n      packingListNumber: plNumber,\n      packingListDate: new Date().toISOString(),\n      status: 'packing_list_issued',\n      updatedAt: new Date().toISOString(),\n    });\n\n    toast.success(`Packing list ${plNumber} generated`);\n    setCurrentStep(2);\n  };\n\n  const handleStockCheck = () => {\n    if (!formData.items || formData.items.length === 0) {\n      toast.error('No items to check');\n      return;\n    }\n\n    const allAvailable = formData.items?.every(item => item.availableStock >= item.quantity);\n    \n    setFormData({\n      ...formData,\n      stockCheckDate: new Date().toISOString(),\n      stockCheckBy: 'Current User',\n      stockCheckNotes,\n      allItemsAvailable: allAvailable,\n      status: 'stock_checked',\n      updatedAt: new Date().toISOString(),\n    });\n\n    if (!allAvailable) {\n      toast.warning('Some items have insufficient stock. Please proceed with caution.');\n    }\n    \n    toast.success('Stock check completed successfully');\n    setCurrentStep(3);\n  };\n\n  const handleStartPacking = () => {\n    if (!scheduledDate || !scheduleTimeSlot) {\n      toast.error('Please select delivery/pickup date and time slot');\n      return;\n    }\n\n    setFormData({\n      ...formData,\n      scheduledDate: scheduledDate.toISOString(),\n      scheduledTimeSlot: scheduleTimeSlot,\n      packingStartedAt: new Date().toISOString(),\n      packingStartedBy: 'Current User',\n      status: 'packing_loading',\n      updatedAt: new Date().toISOString(),\n    });\n    toast.success('Packing started');\n  };\n\n  const handleCompleteLoading = () => {\n    if (formData.type === 'delivery') {\n      // For delivery, need driver details\n      if (!formData.driverName || !formData.vehicleNumber) {\n        toast.error('Please enter driver and vehicle details');\n        return;\n      }\n    }\n\n    const newStatus = formData.type === 'delivery' ? 'in_transit' : 'ready_for_pickup';\n\n    setFormData({\n      ...formData,\n      loadingCompletedAt: new Date().toISOString(),\n      loadingCompletedBy: 'Current User',\n      packingPhotos,\n      status: newStatus,\n      dispatchedAt: formData.type === 'delivery' ? new Date().toISOString() : undefined,\n      updatedAt: new Date().toISOString(),\n    });\n\n    if (formData.type === 'delivery') {\n      toast.success('Items loaded and dispatched for delivery');\n    } else {\n      toast.success('Items packed and ready for customer pickup');\n    }\n    setCurrentStep(4);\n  };\n\n  const handleSendOTP = () => {\n    if (!customerName) {\n      toast.error('Please enter customer name');\n      return;\n    }\n\n    // Generate 6-digit OTP\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\n    setGeneratedOtp(otp);\n    setOtpSent(true);\n    toast.success(`OTP sent to customer: ${otp}`);\n  };\n\n  const handleVerifyOTP = () => {\n    if (otpInput !== generatedOtp) {\n      toast.error('Invalid OTP. Please try again.');\n      return;\n    }\n\n    if (!formData.customerSignature) {\n      toast.error('Customer signature required');\n      return;\n    }\n\n    setFormData({\n      ...formData,\n      deliveredAt: new Date().toISOString(),\n      customerAcknowledgedAt: new Date().toISOString(),\n      customerSignature: formData.customerSignature,\n      customerSignedBy: customerName,\n      customerOTP: generatedOtp,\n      verifiedOTP: true,\n      deliveryPhotos,\n      status: 'completed',\n      inventoryUpdatedAt: new Date().toISOString(),\n      inventoryStatus: 'Rental',\n      updatedAt: new Date().toISOString(),\n    });\n\n    toast.success('OTP verified and delivery completed!');\n    setCurrentStep(5);\n  };\n\n  const handleComplete = () => {\n    toast.success('Delivery process completed successfully');\n    \n    // Save and go back\n    setTimeout(() => {\n      onSave(formData as DeliveryOrder);\n    }, 500);\n  };\n\n  const openSignatureDialog = (type: 'driver' | 'customer') => {\n    setSignatureType(type);\n    setIsSignatureDialogOpen(true);\n    // Initialize canvas when dialog opens\n    setTimeout(() => {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      ctx.strokeStyle = '#231F20';\n      ctx.lineWidth = 2;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    }, 100);\n  };\n\n  const startDrawing = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    setIsDrawing(true);\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    \n    ctx.beginPath();\n    \n    if ('touches' in e) {\n      const touch = e.touches[0];\n      ctx.moveTo(touch.clientX - rect.left, touch.clientY - rect.top);\n    } else {\n      ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);\n    }\n  };\n\n  const draw = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    \n    if ('touches' in e) {\n      const touch = e.touches[0];\n      ctx.lineTo(touch.clientX - rect.left, touch.clientY - rect.top);\n    } else {\n      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);\n    }\n    \n    ctx.stroke();\n  };\n\n  const stopDrawing = () => {\n    setIsDrawing(false);\n  };\n\n  const clearSignature = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n\n  const saveSignature = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    \n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const isEmpty = !imageData.data.some(channel => channel !== 0);\n    \n    if (isEmpty) {\n      toast.error('Please draw your signature before saving');\n      return;\n    }\n    \n    const signatureData = canvas.toDataURL();\n    if (signatureType === 'customer') {\n      setFormData({ ...formData, customerSignature: signatureData });\n      toast.success('Customer signature saved');\n    } else if (signatureType === 'driver') {\n      setFormData({ ...formData, driverSignature: signatureData });\n      toast.success('Driver signature saved');\n    }\n    setIsSignatureDialogOpen(false);\n    clearSignature();\n  };\n\n  const handlePhotoUpload = () => {\n    fileInputRef.current?.click();\n  };\n\n  const onFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    const fileArray = Array.from(files);\n    let loadedCount = 0;\n    const newPhotos: string[] = [];\n\n    fileArray.forEach(file => {\n      if (!file.type.startsWith('image/')) {\n        toast.error(`${file.name} is not an image file`);\n        return;\n      }\n\n      if (file.size > 5 * 1024 * 1024) {\n        toast.error(`${file.name} is too large (max 5MB)`);\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        const url = event.target?.result as string;\n        newPhotos.push(url);\n        loadedCount++;\n\n        if (loadedCount === fileArray.length) {\n          if (currentStep === 3) {\n            setPackingPhotos([...packingPhotos, ...newPhotos]);\n            toast.success(`${newPhotos.length} photo(s) uploaded`);\n          } else if (currentStep === 4) {\n            setDeliveryPhotos([...deliveryPhotos, ...newPhotos]);\n            toast.success(`${newPhotos.length} photo(s) uploaded`);\n          }\n        }\n      };\n      reader.onerror = () => {\n        toast.error(`Failed to read ${file.name}`);\n      };\n      reader.readAsDataURL(file);\n    });\n\n    e.target.value = '';\n  };\n\n  const removePhoto = (index: number, type: 'packing' | 'delivery') => {\n    if (type === 'packing') {\n      setPackingPhotos(packingPhotos.filter((_, i) => i !== index));\n    } else {\n      setDeliveryPhotos(deliveryPhotos.filter((_, i) => i !== index));\n    }\n    toast.success('Photo removed');\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <Button variant=\"outline\" onClick={onBack}>\n          <ArrowLeft className=\"size-4\" />\n        </Button>\n        <div>\n          <h1 className=\"text-[#231F20]\">\n            {delivery ? `Process ${formData.type === 'delivery' ? 'Delivery' : 'Pickup'} - ${delivery.doNumber}` : `New ${formData.type === 'delivery' ? 'Delivery' : 'Pickup'} Order`}\n          </h1>\n          <p className=\"text-gray-600\">Follow the workflow to complete the {formData.type}</p>\n        </div>\n      </div>\n\n      {/* Progress Indicator */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-center justify-between\">\n            {steps.map((step, index) => (\n              <div key={step.number} className=\"flex items-center\">\n                <div className=\"flex flex-col items-center\">\n                  <div\n                    className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                      currentStep > step.number\n                        ? 'bg-green-500 text-white'\n                        : currentStep === step.number\n                        ? 'bg-[#F15929] text-white'\n                        : 'bg-gray-200 text-gray-600'\n                    }`}\n                  >\n                    {currentStep > step.number ? (\n                      <Check className=\"size-5\" />\n                    ) : (\n                      step.number\n                    )}\n                  </div>\n                  <span className=\"text-xs text-center mt-2 max-w-24\">{step.title}</span>\n                </div>\n                {index < steps.length - 1 && (\n                  <div\n                    className={`h-0.5 w-12 mx-2 ${\n                      currentStep > step.number ? 'bg-green-500' : 'bg-gray-200'\n                    }`}\n                  />\n                )}\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Step Content */}\n      {currentStep === 1 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <ClipboardCheck className=\"size-5 text-[#F15929]\" />\n              Step 1: Generate Packing List\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              Generate a packing list for the items to be {formData.type === 'delivery' ? 'delivered' : 'picked up'}.\n            </p>\n\n            {formData.items && formData.items.length > 0 ? (\n              <div className=\"space-y-3\">\n                {formData.items.map((item) => (\n                  <div key={item.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-[#231F20]\">{item.scaffoldingItemName}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        Quantity: {item.quantity} {item.unit}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-gray-500\">\n                <AlertCircle className=\"size-12 text-gray-400 mx-auto mb-4\" />\n                <p>No items found. Please add items first.</p>\n              </div>\n            )}\n\n            <Button\n              onClick={handleGeneratePackingList}\n              className=\"bg-[#F15929] hover:bg-[#d94d1f] w-full\"\n              disabled={!formData.items || formData.items.length === 0}\n            >\n              <FileText className=\"size-4 mr-2\" />\n              Generate Packing List\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {currentStep === 2 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <PackageCheck className=\"size-5 text-[#F15929]\" />\n              Step 2: Check Stock\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              Verify that all items are available in stock.\n            </p>\n\n            <div className=\"space-y-3\">\n              {formData.items?.map((item) => (\n                <div key={item.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div className=\"flex-1\">\n                    <p className=\"text-[#231F20]\">{item.scaffoldingItemName}</p>\n                    <p className=\"text-sm text-gray-500\">\n                      Required: {item.quantity} {item.unit}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-[#231F20]\">Available: {item.availableStock} {item.unit}</p>\n                    {item.availableStock >= item.quantity ? (\n                      <Badge className=\"bg-green-100 text-green-800 mt-1\">\n                        <Check className=\"size-3 mr-1\" />\n                        In Stock\n                      </Badge>\n                    ) : (\n                      <Badge className=\"bg-red-100 text-red-800 mt-1\">\n                        <AlertCircle className=\"size-3 mr-1\" />\n                        Insufficient\n                      </Badge>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Stock Check Notes</Label>\n              <Textarea\n                value={stockCheckNotes}\n                onChange={(e) => setStockCheckNotes(e.target.value)}\n                placeholder=\"Enter any notes about stock availability...\"\n                rows={3}\n              />\n            </div>\n\n            <Button\n              onClick={handleStockCheck}\n              className=\"bg-[#F15929] hover:bg-[#d94d1f] w-full\"\n            >\n              <Check className=\"size-4 mr-2\" />\n              Complete Stock Check\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {currentStep === 3 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Truck className=\"size-5 text-[#F15929]\" />\n              Step 3: Packing & Loading to Lorry\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              Pack items and load them {formData.type === 'delivery' ? 'onto the delivery vehicle' : 'for customer pickup'}.\n            </p>\n\n            {/* Schedule Date & Time - Auto-filled from Delivery Request */}\n            <div className=\"p-4 bg-amber-50 border border-amber-200 rounded-lg\">\n              <p className=\"text-sm text-amber-800 mb-2\">\n                <CalendarIcon className=\"size-4 inline mr-1\" />\n                Scheduled {formData.type === 'delivery' ? 'Delivery' : 'Pickup'} Date & Time (Auto-filled from request)\n              </p>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                <div>\n                  <span className=\"text-xs text-gray-600\">Date:</span>\n                  <p className=\"text-[#231F20]\">{scheduledDate ? format(scheduledDate, 'PPP') : 'Not set'}</p>\n                </div>\n                <div>\n                  <span className=\"text-xs text-gray-600\">Time Slot:</span>\n                  <p className=\"text-[#231F20]\">{scheduleTimeSlot || 'Not set'}</p>\n                </div>\n              </div>\n            </div>\n\n            {formData.type === 'delivery' && (\n              <>\n                <div className=\"space-y-2\">\n                  <Label>Driver Name</Label>\n                  <Input\n                    value={formData.driverName || ''}\n                    onChange={(e) => setFormData({ ...formData, driverName: e.target.value })}\n                    placeholder=\"Enter driver name\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label>Driver Contact</Label>\n                    <Input\n                      value={formData.driverContact || ''}\n                      onChange={(e) => setFormData({ ...formData, driverContact: e.target.value })}\n                      placeholder=\"+60 12-345-6789\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>Vehicle Number</Label>\n                    <Input\n                      value={formData.vehicleNumber || ''}\n                      onChange={(e) => setFormData({ ...formData, vehicleNumber: e.target.value })}\n                      placeholder=\"ABC 1234\"\n                    />\n                  </div>\n                </div>\n              </>\n            )}\n\n            {/* Photo Upload */}\n            <div className=\"space-y-2\">\n              <Label>Packing Photos (Optional)</Label>\n              <Button variant=\"outline\" onClick={handlePhotoUpload} className=\"w-full\">\n                <Upload className=\"size-4 mr-2\" />\n                Upload Photos\n              </Button>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                multiple\n                onChange={onFileSelect}\n                className=\"hidden\"\n              />\n              {packingPhotos.length > 0 && (\n                <div className=\"grid grid-cols-3 gap-2 mt-2\">\n                  {packingPhotos.map((photo, index) => (\n                    <div key={index} className=\"relative\">\n                      <img src={photo} alt={`Packing ${index + 1}`} className=\"w-full h-24 object-cover rounded\" />\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        className=\"absolute top-1 right-1 size-6 p-0\"\n                        onClick={() => removePhoto(index, 'packing')}\n                      >\n                        <X className=\"size-3\" />\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex gap-2\">\n              {formData.status !== 'packing_loading' && (\n                <Button\n                  onClick={handleStartPacking}\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                >\n                  Start Packing\n                </Button>\n              )}\n              <Button\n                onClick={handleCompleteLoading}\n                className=\"bg-[#F15929] hover:bg-[#d94d1f] flex-1\"\n                disabled={!scheduledDate || !scheduleTimeSlot || (formData.type === 'delivery' && (!formData.driverName || !formData.vehicleNumber))}\n              >\n                <Check className=\"size-4 mr-2\" />\n                Complete Loading\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {currentStep === 4 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <FileSignature className=\"size-5 text-[#F15929]\" />\n              Step 4: {formData.type === 'delivery' ? 'In Transit - Customer Sign & OTP' : 'Ready for Pickup - Customer Sign & OTP'}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              {formData.type === 'delivery' \n                ? 'Items are on the way. Customer needs to sign and verify OTP upon receiving goods.' \n                : 'Items are ready for pickup. Customer needs to sign and verify OTP when collecting goods.'}\n            </p>\n\n            {formData.type === 'delivery' && (\n              <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Truck className=\"size-5 text-blue-600\" />\n                  <span className=\"text-blue-900\">In Transit</span>\n                </div>\n                <div className=\"text-sm text-blue-700\">\n                  <p>Driver: {formData.driverName}</p>\n                  <p>Vehicle: {formData.vehicleNumber}</p>\n                  <p>Contact: {formData.driverContact}</p>\n                </div>\n              </div>\n            )}\n\n            {formData.type === 'pickup' && (\n              <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <PackageCheck className=\"size-5 text-green-600\" />\n                  <span className=\"text-green-900\">Ready for Pickup</span>\n                </div>\n                <div className=\"text-sm text-green-700\">\n                  <p>Items are packed and ready at warehouse</p>\n                  <p>Pickup Time: {scheduledDate && format(new Date(scheduledDate), 'PPP')} {scheduleTimeSlot}</p>\n                </div>\n              </div>\n            )}\n\n            {/* View DO for Customer */}\n            <div className=\"p-4 bg-gray-50 border border-gray-200 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-[#231F20] mb-1\">Delivery Order Document</p>\n                  <p className=\"text-sm text-gray-600\">Share DO with customer for verification</p>\n                </div>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => {\n                    toast.info('Generating DO preview...');\n                    // In a real app, this would open a PDF viewer or download the DO\n                    setTimeout(() => {\n                      toast.success('DO preview generated. Share this with customer.');\n                      setIsDOViewerOpen(true);\n                    }, 1000);\n                  }}\n                >\n                  <FileText className=\"size-4 mr-2\" />\n                  View DO\n                </Button>\n              </div>\n            </div>\n\n            {/* Delivery Photos */}\n            <div className=\"space-y-2\">\n              <Label>{formData.type === 'delivery' ? 'Delivery Photos (Optional)' : 'Pickup Photos (Optional)'}</Label>\n              <Button variant=\"outline\" onClick={handlePhotoUpload} className=\"w-full\">\n                <Upload className=\"size-4 mr-2\" />\n                Upload Photos\n              </Button>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                multiple\n                onChange={onFileSelect}\n                className=\"hidden\"\n              />\n              {deliveryPhotos.length > 0 && (\n                <div className=\"grid grid-cols-3 gap-2 mt-2\">\n                  {deliveryPhotos.map((photo, index) => (\n                    <div key={index} className=\"relative\">\n                      <img src={photo} alt={`Delivery ${index + 1}`} className=\"w-full h-24 object-cover rounded\" />\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        className=\"absolute top-1 right-1 size-6 p-0\"\n                        onClick={() => removePhoto(index, 'delivery')}\n                      >\n                        <X className=\"size-3\" />\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Customer Name */}\n            <div className=\"space-y-2\">\n              <Label>Customer Name</Label>\n              <Input\n                value={customerName}\n                onChange={(e) => setCustomerName(e.target.value)}\n                placeholder=\"Enter customer name\"\n              />\n            </div>\n\n            {/* Customer Signature */}\n            <div className=\"space-y-2\">\n              <Label>Customer Signature</Label>\n              {formData.customerSignature ? (\n                <div className=\"border rounded-lg p-4\">\n                  <img src={formData.customerSignature} alt=\"Signature\" className=\"max-h-32\" />\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => openSignatureDialog('customer')}\n                    className=\"mt-2\"\n                  >\n                    Change Signature\n                  </Button>\n                </div>\n              ) : (\n                <Button variant=\"outline\" onClick={() => openSignatureDialog('customer')} className=\"w-full\">\n                  <FileSignature className=\"size-4 mr-2\" />\n                  Capture Customer Signature\n                </Button>\n              )}\n            </div>\n\n            {/* OTP Section */}\n            <div className=\"space-y-2\">\n              <Label>OTP Verification</Label>\n              {!otpSent ? (\n                <Button\n                  variant=\"outline\"\n                  onClick={handleSendOTP}\n                  className=\"w-full\"\n                  disabled={!customerName}\n                >\n                  <Phone className=\"size-4 mr-2\" />\n                  Send OTP to Customer\n                </Button>\n              ) : (\n                <div className=\"space-y-2\">\n                  <div className=\"p-3 bg-green-50 border border-green-200 rounded\">\n                    <p className=\"text-sm text-green-800\">\n                      <CheckCircle2 className=\"size-4 inline mr-1\" />\n                      OTP sent: <strong>{generatedOtp}</strong>\n                    </p>\n                  </div>\n                  <Input\n                    value={otpInput}\n                    onChange={(e) => setOtpInput(e.target.value)}\n                    placeholder=\"Enter 6-digit OTP\"\n                    maxLength={6}\n                  />\n                  <Button\n                    onClick={handleVerifyOTP}\n                    className=\"bg-[#F15929] hover:bg-[#d94d1f] w-full\"\n                    disabled={otpInput.length !== 6 || !formData.customerSignature}\n                  >\n                    <Check className=\"size-4 mr-2\" />\n                    Verify OTP & Complete\n                  </Button>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {currentStep === 5 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CheckCircle2 className=\"size-5 text-green-600\" />\n              {formData.type === 'delivery' ? 'Delivery' : 'Pickup'} Completed\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"text-center py-8\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-4\">\n                <CheckCircle2 className=\"size-8 text-green-600\" />\n              </div>\n              <h3 className=\"text-[#231F20] mb-2\">Successfully Completed!</h3>\n              <p className=\"text-gray-600 mb-6\">\n                Customer has signed and OTP verified. Inventory has been updated.\n              </p>\n\n              <div className=\"bg-gray-50 p-4 rounded-lg text-left space-y-2 mb-6\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">DO Number:</span>\n                  <span className=\"text-[#231F20]\">{formData.doNumber}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Customer:</span>\n                  <span className=\"text-[#231F20]\">{customerName}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Completed At:</span>\n                  <span className=\"text-[#231F20]\">\n                    {formData.customerAcknowledgedAt && format(new Date(formData.customerAcknowledgedAt), 'PPp')}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">OTP Verified:</span>\n                  <Badge className=\"bg-green-100 text-green-800\">\n                    <CheckCircle2 className=\"size-3 mr-1\" />\n                    Yes\n                  </Badge>\n                </div>\n              </div>\n\n              <Button\n                onClick={handleComplete}\n                className=\"bg-[#F15929] hover:bg-[#d94d1f] w-full\"\n              >\n                <Save className=\"size-4 mr-2\" />\n                Save & Return to List\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Signature Dialog */}\n      <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>{signatureType === 'driver' ? 'Driver' : 'Customer'} Signature</DialogTitle>\n            <DialogDescription>\n              Please have the {signatureType} sign below using mouse or touch\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"border-2 border-gray-300 rounded-lg\">\n              <canvas\n                ref={canvasRef}\n                width={600}\n                height={300}\n                className=\"w-full cursor-crosshair\"\n                onMouseDown={startDrawing}\n                onMouseMove={draw}\n                onMouseUp={stopDrawing}\n                onMouseLeave={stopDrawing}\n                onTouchStart={startDrawing}\n                onTouchMove={draw}\n                onTouchEnd={stopDrawing}\n              />\n            </div>\n            <div className=\"flex gap-2\">\n              <Button variant=\"outline\" onClick={clearSignature} className=\"flex-1\">\n                <X className=\"size-4 mr-2\" />\n                Clear\n              </Button>\n              <Button onClick={saveSignature} className=\"flex-1 bg-[#F15929] hover:bg-[#d94d1f]\">\n                <Check className=\"size-4 mr-2\" />\n                Save Signature\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* DO Viewer Dialog */}\n      <Dialog open={isDOViewerOpen} onOpenChange={setIsDOViewerOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Delivery Order - {formData.doNumber}</DialogTitle>\n            <DialogDescription>\n              Delivery Order document for customer verification\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-6 p-6 bg-white border rounded-lg\">\n            {/* Company Header */}\n            <div className=\"text-center border-b-2 border-[#F15929] pb-4\">\n              <h2 className=\"text-[#231F20] mb-1\">Power Metal & Steel</h2>\n              <p className=\"text-sm text-gray-600\">Scaffolding Rental & Sales</p>\n              <p className=\"text-sm text-gray-600\">Tel: +60 3-1234 5678 | Email: info@powermetalsteel.com</p>\n            </div>\n\n            {/* DO Header */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <h3 className=\"text-[#F15929] mb-2\">DELIVERY ORDER</h3>\n                <div className=\"space-y-1 text-sm\">\n                  <p><strong>DO Number:</strong> {formData.doNumber}</p>\n                  <p><strong>Date:</strong> {formData.packingListDate && format(new Date(formData.packingListDate), 'PP')}</p>\n                  <p><strong>Order ID:</strong> {formData.orderId}</p>\n                  <p><strong>Agreement ID:</strong> {formData.agreementId}</p>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <Badge className={formData.type === 'delivery' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}>\n                  {formData.type === 'delivery' ? 'DELIVERY' : 'PICKUP'}\n                </Badge>\n              </div>\n            </div>\n\n            {/* Customer Information */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-1\">\n                <h4 className=\"text-[#231F20] mb-2\">Customer Details</h4>\n                <p className=\"text-sm\"><strong>Name:</strong> {formData.customerName}</p>\n                <p className=\"text-sm\"><strong>Contact:</strong> {formData.customerContact}</p>\n                <p className=\"text-sm\"><strong>Address:</strong> {formData.customerAddress}</p>\n              </div>\n              <div className=\"space-y-1\">\n                <h4 className=\"text-[#231F20] mb-2\">{formData.type === 'delivery' ? 'Delivery' : 'Pickup'} Location</h4>\n                <p className=\"text-sm\">{formData.siteAddress}</p>\n                {scheduledDate && (\n                  <>\n                    <p className=\"text-sm\"><strong>Date:</strong> {format(scheduledDate, 'PPP')}</p>\n                    <p className=\"text-sm\"><strong>Time:</strong> {scheduleTimeSlot}</p>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Items Table */}\n            <div>\n              <h4 className=\"text-[#231F20] mb-2\">Items</h4>\n              <div className=\"border rounded-lg overflow-hidden\">\n                <table className=\"w-full text-sm\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"text-left p-3 border-b\">#</th>\n                      <th className=\"text-left p-3 border-b\">Description</th>\n                      <th className=\"text-right p-3 border-b\">Quantity</th>\n                      <th className=\"text-right p-3 border-b\">Unit</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {formData.items?.map((item, index) => (\n                      <tr key={item.id} className=\"border-b last:border-0\">\n                        <td className=\"p-3\">{index + 1}</td>\n                        <td className=\"p-3\">{item.scaffoldingItemName}</td>\n                        <td className=\"p-3 text-right\">{item.quantity}</td>\n                        <td className=\"p-3 text-right\">{item.unit}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            {/* Delivery/Pickup Information */}\n            {formData.type === 'delivery' && formData.driverName && (\n              <div className=\"bg-blue-50 p-4 rounded-lg\">\n                <h4 className=\"text-[#231F20] mb-2\">Driver Information</h4>\n                <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                  <div>\n                    <p className=\"text-gray-600\">Driver Name</p>\n                    <p className=\"text-[#231F20]\">{formData.driverName}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-gray-600\">Contact</p>\n                    <p className=\"text-[#231F20]\">{formData.driverContact}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-gray-600\">Vehicle</p>\n                    <p className=\"text-[#231F20]\">{formData.vehicleNumber}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Terms and Conditions */}\n            <div className=\"text-xs text-gray-600 space-y-1 border-t pt-4\">\n              <p className=\"text-[#231F20] mb-2\"><strong>Terms and Conditions:</strong></p>\n              <p>1. Please inspect all items upon {formData.type === 'delivery' ? 'delivery' : 'pickup'} and report any discrepancies immediately.</p>\n              <p>2. Customer signature and OTP verification required to complete this order.</p>\n              <p>3. All rental items must be returned in good condition as per the rental agreement.</p>\n              <p>4. Late returns may be subject to additional charges as per agreement terms.</p>\n            </div>\n\n            {/* Footer */}\n            <div className=\"grid grid-cols-2 gap-8 pt-6 border-t\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-2\">Prepared By</p>\n                <div className=\"border-t border-gray-300 pt-2 mt-8\">\n                  <p className=\"text-sm text-[#231F20]\">{formData.createdBy}</p>\n                  <p className=\"text-xs text-gray-500\">Power Metal & Steel</p>\n                </div>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600 mb-2\">Received By (Customer)</p>\n                <div className=\"border-t border-gray-300 pt-2 mt-8\">\n                  <p className=\"text-sm text-[#231F20]\">_______________________</p>\n                  <p className=\"text-xs text-gray-500\">Name & Signature</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2 pt-4\">\n              <Button\n                variant=\"outline\"\n                className=\"flex-1\"\n                onClick={() => {\n                  window.print();\n                  toast.success('Print dialog opened');\n                }}\n              >\n                <Download className=\"size-4 mr-2\" />\n                Print DO\n              </Button>\n              <Button\n                className=\"flex-1 bg-[#F15929] hover:bg-[#d94d1f]\"\n                onClick={() => setIsDOViewerOpen(false)}\n              >\n                Close\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Hidden file input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        multiple\n        onChange={onFileSelect}\n        className=\"hidden\"\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2866, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/delivery/DeliveryDetails.tsx"],"sourcesContent":["import {\n  ArrowLeft, FileText, User, Calendar as CalendarIcon, MapPin,\n  Phone, Package, Truck, CheckCircle2, Download, Clock,\n  FileSignature, Image as ImageIcon\n} from 'lucide-react';\nimport { Button } from '../ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Badge } from '../ui/badge';\nimport { DeliveryOrder } from './DeliveryManagement';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '../ui/table';\n\ninterface DeliveryDetailsProps {\n  delivery: DeliveryOrder;\n  onProcess: () => void;\n  onBack: () => void;\n}\n\nexport function DeliveryDetails({ delivery, onProcess, onBack }: DeliveryDetailsProps) {\n  const getStatusBadge = (status: DeliveryOrder['status']) => {\n    const config = {\n      pending: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'Pending' },\n      stock_checked: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Stock Checked' },\n      packing_list_issued: { bg: 'bg-cyan-100', text: 'text-cyan-800', label: 'Packing List Issued' },\n      schedule_confirmed: { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Scheduled' },\n      packing: { bg: 'bg-amber-100', text: 'text-amber-800', label: 'Packing' },\n      loaded: { bg: 'bg-orange-100', text: 'text-orange-800', label: 'Loaded' },\n      do_issued: { bg: 'bg-indigo-100', text: 'text-indigo-800', label: 'DO Issued' },\n      driver_acknowledged: { bg: 'bg-violet-100', text: 'text-violet-800', label: 'Driver Acknowledged' },\n      in_transit: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'In Transit' },\n      delivered: { bg: 'bg-lime-100', text: 'text-lime-800', label: 'Delivered' },\n      customer_acknowledged: { bg: 'bg-teal-100', text: 'text-teal-800', label: 'Customer Acknowledged' },\n      completed: { bg: 'bg-green-100', text: 'text-green-800', label: 'Completed' },\n    };\n\n    const statusConfig = config[status as keyof typeof config];\n    if (!statusConfig) {\n      return <Badge className=\"bg-gray-100 text-gray-800\">{status || 'Unknown'}</Badge>;\n    }\n    \n    const { bg, text, label } = statusConfig;\n    return <Badge className={`${bg} ${text}`}>{label}</Badge>;\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"outline\" onClick={onBack}>\n            <ArrowLeft className=\"size-4\" />\n          </Button>\n          <div>\n            <div className=\"flex items-center gap-3\">\n              <h1 className=\"text-[#231F20]\">{delivery.doNumber}</h1>\n              {getStatusBadge(delivery.status)}\n            </div>\n            <p className=\"text-gray-600\">Order ID: {delivery.orderId}</p>\n          </div>\n        </div>\n        {delivery.status !== 'completed' && (\n          <Button onClick={onProcess} className=\"bg-[#F15929] hover:bg-[#d94d1f]\">\n            Continue Processing\n          </Button>\n        )}\n      </div>\n\n      {/* Customer Information */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Customer Information</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"flex items-start gap-3\">\n              <User className=\"size-5 text-gray-400 mt-0.5\" />\n              <div>\n                <p className=\"text-sm text-gray-500\">Customer Name</p>\n                <p className=\"text-[#231F20]\">{delivery.customerName}</p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <Phone className=\"size-5 text-gray-400 mt-0.5\" />\n              <div>\n                <p className=\"text-sm text-gray-500\">Contact</p>\n                <p className=\"text-[#231F20]\">{delivery.customerContact}</p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <MapPin className=\"size-5 text-gray-400 mt-0.5\" />\n              <div>\n                <p className=\"text-sm text-gray-500\">Customer Address</p>\n                <p className=\"text-[#231F20]\">{delivery.customerAddress}</p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <MapPin className=\"size-5 text-gray-400 mt-0.5\" />\n              <div>\n                <p className=\"text-sm text-gray-500\">Delivery Site Address</p>\n                <p className=\"text-[#231F20]\">{delivery.siteAddress}</p>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Schedule Information */}\n      {delivery.scheduledDate && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Schedule Information</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"flex items-start gap-3\">\n                <CalendarIcon className=\"size-5 text-gray-400 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Scheduled Date</p>\n                  <p className=\"text-[#231F20]\">\n                    {new Date(delivery.scheduledDate).toLocaleDateString()}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <Clock className=\"size-5 text-gray-400 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Time Slot</p>\n                  <p className=\"text-[#231F20]\">{delivery.scheduledTimeSlot}</p>\n                </div>\n              </div>\n              {delivery.scheduleConfirmedBy && (\n                <div className=\"flex items-start gap-3\">\n                  <CheckCircle2 className=\"size-5 text-gray-400 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm text-gray-500\">Confirmed By</p>\n                    <p className=\"text-[#231F20]\">{delivery.scheduleConfirmedBy}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Driver & Vehicle Information */}\n      {delivery.driverName && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Driver & Vehicle Information</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"flex items-start gap-3\">\n                <User className=\"size-5 text-gray-400 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Driver Name</p>\n                  <p className=\"text-[#231F20]\">{delivery.driverName}</p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <Phone className=\"size-5 text-gray-400 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Driver Contact</p>\n                  <p className=\"text-[#231F20]\">{delivery.driverContact}</p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <Truck className=\"size-5 text-gray-400 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Vehicle Number</p>\n                  <p className=\"text-[#231F20]\">{delivery.vehicleNumber}</p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Items */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Delivery Items</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-12\">#</TableHead>\n                <TableHead>Item Description</TableHead>\n                <TableHead className=\"text-right\">Quantity</TableHead>\n                <TableHead className=\"text-right\">Unit</TableHead>\n                <TableHead className=\"text-right\">Available Stock</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {delivery.items.map((item, index) => (\n                <TableRow key={item.id}>\n                  <TableCell>{index + 1}</TableCell>\n                  <TableCell>\n                    <div>\n                      <p className=\"text-[#231F20]\">{item.scaffoldingItemName}</p>\n                      {item.dimensions && (\n                        <p className=\"text-sm text-gray-500\">{item.dimensions}</p>\n                      )}\n                      {item.weight && (\n                        <p className=\"text-sm text-gray-500\">Weight: {item.weight}</p>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-right\">{item.quantity}</TableCell>\n                  <TableCell className=\"text-right\">{item.unit}</TableCell>\n                  <TableCell className=\"text-right\">\n                    <Badge className={item.availableStock >= item.quantity ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}>\n                      {item.availableStock}\n                    </Badge>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n\n      {/* Packing Photos */}\n      {delivery.packingPhotos && delivery.packingPhotos.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <ImageIcon className=\"size-5\" />\n              Packing Photos\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              {delivery.packingPhotos.map((photo, index) => (\n                <div key={index} className=\"relative group\">\n                  <img\n                    src={photo}\n                    alt={`Packing ${index + 1}`}\n                    className=\"w-full h-32 object-cover rounded-lg border\"\n                  />\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"opacity-0 group-hover:opacity-100 text-white\"\n                      onClick={() => window.open(photo, '_blank')}\n                    >\n                      View\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Delivery Photos */}\n      {delivery.deliveryPhotos && delivery.deliveryPhotos.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <ImageIcon className=\"size-5\" />\n              Delivery Photos\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              {delivery.deliveryPhotos.map((photo, index) => (\n                <div key={index} className=\"relative group\">\n                  <img\n                    src={photo}\n                    alt={`Delivery ${index + 1}`}\n                    className=\"w-full h-32 object-cover rounded-lg border\"\n                  />\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"opacity-0 group-hover:opacity-100 text-white\"\n                      onClick={() => window.open(photo, '_blank')}\n                    >\n                      View\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Signatures */}\n      {(delivery.driverSignature || delivery.customerSignature) && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Signatures</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {delivery.driverSignature && (\n                <div>\n                  <h4 className=\"text-sm text-gray-500 mb-2\">Driver Signature</h4>\n                  <img\n                    src={delivery.driverSignature}\n                    alt=\"Driver signature\"\n                    className=\"border rounded-lg p-4 bg-white w-full\"\n                  />\n                  {delivery.driverAcknowledgedAt && (\n                    <p className=\"text-sm text-gray-500 mt-2\">\n                      Signed: {new Date(delivery.driverAcknowledgedAt).toLocaleString()}\n                    </p>\n                  )}\n                </div>\n              )}\n              {delivery.customerSignature && (\n                <div>\n                  <h4 className=\"text-sm text-gray-500 mb-2\">Customer Signature</h4>\n                  <img\n                    src={delivery.customerSignature}\n                    alt=\"Customer signature\"\n                    className=\"border rounded-lg p-4 bg-white w-full\"\n                  />\n                  <p className=\"text-sm text-gray-600 mt-2\">{delivery.customerSignedBy}</p>\n                  {delivery.customerAcknowledgedAt && (\n                    <p className=\"text-sm text-gray-500\">\n                      Signed: {new Date(delivery.customerAcknowledgedAt).toLocaleString()}\n                    </p>\n                  )}\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Workflow Timeline */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Workflow Timeline</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {delivery.stockCheckDate && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-blue-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Stock Checked</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.stockCheckDate).toLocaleString()}  {delivery.stockCheckBy}\n                  </p>\n                  {delivery.stockCheckNotes && (\n                    <p className=\"text-sm text-gray-600 mt-1\">{delivery.stockCheckNotes}</p>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {delivery.packingListDate && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-cyan-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Packing List Issued</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.packingListDate).toLocaleString()}  {delivery.packingListNumber}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.scheduleConfirmedAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-purple-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Schedule Confirmed</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.scheduleConfirmedAt).toLocaleString()}  {delivery.scheduleConfirmedBy}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.loadingCompletedAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-orange-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Loading Completed</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.loadingCompletedAt).toLocaleString()}  {delivery.loadingCompletedBy}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.doIssuedAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-indigo-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Delivery Order Issued</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.doIssuedAt).toLocaleString()}  {delivery.doIssuedBy}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.dispatchedAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-yellow-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Dispatched</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.dispatchedAt).toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.deliveredAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-lime-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Delivered</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.deliveredAt).toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.customerAcknowledgedAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-teal-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Customer Acknowledged</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.customerAcknowledgedAt).toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            {delivery.inventoryUpdatedAt && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-green-500 mt-2\"></div>\n                <div>\n                  <p className=\"text-[#231F20]\">Completed - Inventory Updated</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {new Date(delivery.inventoryUpdatedAt).toLocaleString()}\n                  </p>\n                  <Badge className=\"bg-green-100 text-green-800 mt-1\">\n                    Status: {delivery.inventoryStatus}\n                  </Badge>\n                </div>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4468, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/delivery/DeliveryManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport {\n  Truck, Package, CheckCircle2, Clock, AlertCircle, Plus, \n  Search, Filter, Eye, FileText, Download, ClipboardCheck,\n  PackageCheck, MapPin, Calendar as CalendarIcon, User,\n  Warehouse, TrendingRight, MoreVertical, Edit\n} from 'lucide-react';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Badge } from '../ui/badge';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../ui/select';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '../ui/table';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '../ui/dropdown-menu';\nimport { DeliveryWorkflow } from './DeliveryWorkflow';\nimport { DeliveryDetails } from './DeliveryDetails';\nimport { toast } from 'sonner';\n\nexport interface DeliveryItem {\n  id: string;\n  scaffoldingItemId: string;\n  scaffoldingItemName: string;\n  quantity: number;\n  unit: string;\n  availableStock: number;\n  weight?: string;\n  dimensions?: string;\n}\n\nexport interface DeliveryOrder {\n  id: string;\n  doNumber: string;\n  orderId: string;\n  agreementId: string;\n  customerName: string;\n  customerContact: string;\n  customerAddress: string;\n  siteAddress: string;\n  type: 'delivery' | 'pickup';  // Type of delivery\n  items: DeliveryItem[];\n  \n  // Workflow status\n  status: \n    | 'pending'                // DO created, waiting for packing list\n    | 'packing_list_issued'    // Packing list generated\n    | 'stock_checked'          // Stock availability verified\n    | 'packing_loading'        // Items being packed and loaded to lorry\n    | 'in_transit'             // On the way (delivery only)\n    | 'ready_for_pickup'       // Ready for customer pickup (pickup only)\n    | 'completed';             // Customer signed and OTP verified\n  \n  // Packing list\n  packingListNumber?: string;\n  packingListDate?: string;\n  \n  // Stock check\n  stockCheckDate?: string;\n  stockCheckBy?: string;\n  stockCheckNotes?: string;\n  allItemsAvailable?: boolean;\n  \n  // Schedule\n  scheduledDate?: string;\n  scheduledTimeSlot?: string;\n  scheduleConfirmedAt?: string;\n  scheduleConfirmedBy?: string;\n  \n  // Packing & Loading\n  packingStartedAt?: string;\n  packingStartedBy?: string;\n  loadingCompletedAt?: string;\n  loadingCompletedBy?: string;\n  packingPhotos?: string[];\n  \n  // Driver (for delivery only)\n  driverName?: string;\n  driverContact?: string;\n  vehicleNumber?: string;\n  driverSignature?: string;\n  driverAcknowledgedAt?: string;\n  dispatchedAt?: string;\n  \n  // Delivery Order (DO)\n  doIssuedAt?: string;\n  doIssuedBy?: string;\n  \n  // Delivery\n  deliveredAt?: string;\n  deliveryPhotos?: string[];\n  \n  // Customer acknowledgement (Sign & OTP)\n  customerAcknowledgedAt?: string;\n  customerSignature?: string;\n  customerSignedBy?: string;\n  customerOTP?: string;\n  verifiedOTP?: boolean;\n  \n  // Inventory\n  inventoryUpdatedAt?: string;\n  inventoryStatus?: 'HQ' | 'Rental';\n  \n  // Metadata\n  createdBy: string;\n  createdAt: string;\n  updatedAt: string;\n  notes?: string;\n}\n\n// Mock data\nconst mockDeliveries: DeliveryOrder[] = [\n  {\n    id: 'DEL-001',\n    doNumber: 'DO-2026-001',\n    orderId: 'ORD-2026-156',\n    agreementId: 'AGR-2026-089',\n    customerName: 'ABC Construction Sdn Bhd',\n    customerContact: '+60 12-345-6789',\n    customerAddress: 'No. 45, Jalan Ampang, 50450 Kuala Lumpur',\n    siteAddress: 'Lot 123, Jalan Bukit Bintang, 55100 KL',\n    type: 'delivery',\n    items: [\n      {\n        id: 'ITM-001',\n        scaffoldingItemId: 'SCAF-001',\n        scaffoldingItemName: 'Steel Pipe Scaffolding - Standard (6m)',\n        quantity: 50,\n        unit: 'pcs',\n        availableStock: 200,\n        weight: '25kg/pc',\n        dimensions: '48.3mm x 6m'\n      },\n      {\n        id: 'ITM-002',\n        scaffoldingItemId: 'SCAF-002',\n        scaffoldingItemName: 'Scaffold Board - Wooden (3.9m)',\n        quantity: 30,\n        unit: 'pcs',\n        availableStock: 150,\n        weight: '20kg/pc',\n        dimensions: '225mm x 38mm x 3.9m'\n      }\n    ],\n    status: 'pending',\n    scheduledDate: '2026-12-15',\n    scheduledTimeSlot: '09:00 - 12:00',\n    createdBy: 'Sales Staff',\n    createdAt: '2026-12-02T09:00:00',\n    updatedAt: '2026-12-02T09:00:00',\n  },\n  {\n    id: 'DEL-002',\n    doNumber: 'DO-2026-002',\n    orderId: 'ORD-2026-157',\n    agreementId: 'AGR-2026-090',\n    customerName: 'XYZ Builders Sdn Bhd',\n    customerContact: '+60 13-456-7890',\n    customerAddress: 'Unit 12-3, Tower A, The Pinnacle, 50088 KL',\n    siteAddress: 'Site 45B, Taman Desa Development',\n    type: 'pickup',\n    items: [\n      {\n        id: 'ITM-003',\n        scaffoldingItemId: 'SCAF-003',\n        scaffoldingItemName: 'H-Frame Scaffolding (1.7m x 1.2m)',\n        quantity: 20,\n        unit: 'pcs',\n        availableStock: 80,\n        weight: '22kg/pc',\n        dimensions: '1.7m x 1.2m'\n      }\n    ],\n    status: 'pending',\n    scheduledDate: '2026-12-18',\n    scheduledTimeSlot: '14:00 - 17:00',\n    createdBy: 'Sales Staff',\n    createdAt: '2026-12-05T09:00:00',\n    updatedAt: '2026-12-05T09:00:00',\n  },\n  {\n    id: 'DEL-003',\n    doNumber: 'DO-2026-003',\n    orderId: 'ORD-2026-158',\n    agreementId: 'AGR-2026-091',\n    customerName: 'Prime Engineering Works',\n    customerContact: '+60 14-567-8901',\n    customerAddress: 'Level 5, Menara TH, Jalan Tun Razak',\n    siteAddress: 'Plaza Metro, Jalan Raja Chulan',\n    type: 'delivery',\n    items: [\n      {\n        id: 'ITM-004',\n        scaffoldingItemId: 'SCAF-004',\n        scaffoldingItemName: 'Ringlock System - Vertical (3m)',\n        quantity: 60,\n        unit: 'pcs',\n        availableStock: 120,\n        weight: '20kg/pc'\n      },\n      {\n        id: 'ITM-005',\n        scaffoldingItemId: 'SCAF-005',\n        scaffoldingItemName: 'Steel Ledger (2m)',\n        quantity: 40,\n        unit: 'pcs',\n        availableStock: 100,\n        weight: '12kg/pc'\n      }\n    ],\n    status: 'pending',\n    scheduledDate: '2026-12-20',\n    scheduledTimeSlot: '09:00 - 12:00',\n    createdBy: 'Sales Staff',\n    createdAt: '2026-12-08T09:00:00',\n    updatedAt: '2026-12-08T09:00:00',\n  },\n  {\n    id: 'DEL-004',\n    doNumber: 'DO-2026-004',\n    orderId: 'ORD-2026-159',\n    agreementId: 'AGR-2026-092',\n    customerName: 'Golden Projects Sdn Bhd',\n    customerContact: '+60 15-678-9012',\n    customerAddress: 'No. 88, Jalan Sultan Ismail, 50250 KL',\n    siteAddress: 'Summit Mall Development, Subang Jaya',\n    type: 'pickup',\n    items: [\n      {\n        id: 'ITM-006',\n        scaffoldingItemId: 'SCAF-006',\n        scaffoldingItemName: 'Steel Tube - Heavy Duty (4m)',\n        quantity: 100,\n        unit: 'pcs',\n        availableStock: 300,\n        weight: '18kg/pc',\n        dimensions: '48.3mm x 4m'\n      },\n      {\n        id: 'ITM-007',\n        scaffoldingItemId: 'SCAF-007',\n        scaffoldingItemName: 'Swivel Coupler',\n        quantity: 150,\n        unit: 'pcs',\n        availableStock: 500,\n        weight: '1.5kg/pc'\n      }\n    ],\n    status: 'pending',\n    scheduledDate: '2026-12-22',\n    scheduledTimeSlot: '14:00 - 17:00',\n    createdBy: 'Sales Staff',\n    createdAt: '2026-12-10T09:00:00',\n    updatedAt: '2026-12-10T09:00:00',\n  },\n];\n\nexport function DeliveryManagement() {\n  const [deliveries, setDeliveries] = useState<DeliveryOrder[]>([]);\n  const [filteredDeliveries, setFilteredDeliveries] = useState<DeliveryOrder[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [viewMode, setViewMode] = useState<'list' | 'workflow' | 'details'>('list');\n  const [selectedDelivery, setSelectedDelivery] = useState<DeliveryOrder | null>(null);\n\n  useEffect(() => {\n    // Load from localStorage or use mock data\n    const saved = localStorage.getItem('deliveryOrders');\n    if (saved) {\n      setDeliveries(JSON.parse(saved));\n    } else {\n      setDeliveries(mockDeliveries);\n      localStorage.setItem('deliveryOrders', JSON.stringify(mockDeliveries));\n    }\n  }, []);\n\n  useEffect(() => {\n    let filtered = deliveries;\n\n    // Search filter\n    if (searchQuery) {\n      filtered = filtered.filter(d =>\n        d.doNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        d.customerName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        d.orderId.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Status filter\n    if (statusFilter !== 'all') {\n      filtered = filtered.filter(d => d.status === statusFilter);\n    }\n\n    setFilteredDeliveries(filtered);\n  }, [deliveries, searchQuery, statusFilter]);\n\n  const saveDeliveries = (updated: DeliveryOrder[]) => {\n    setDeliveries(updated);\n    localStorage.setItem('deliveryOrders', JSON.stringify(updated));\n  };\n\n  const handleCreateNew = () => {\n    setSelectedDelivery(null);\n    setViewMode('workflow');\n  };\n\n  const handleViewDetails = (delivery: DeliveryOrder) => {\n    setSelectedDelivery(delivery);\n    setViewMode('details');\n  };\n\n  const handleProcessDelivery = (delivery: DeliveryOrder) => {\n    setSelectedDelivery(delivery);\n    setViewMode('workflow');\n  };\n\n  const handleSaveDelivery = (delivery: DeliveryOrder) => {\n    const isNew = !deliveries.find(d => d.id === delivery.id);\n    \n    if (isNew) {\n      saveDeliveries([...deliveries, delivery]);\n      toast.success('Delivery order created successfully');\n    } else {\n      saveDeliveries(deliveries.map(d => d.id === delivery.id ? delivery : d));\n      toast.success('Delivery order updated successfully');\n    }\n    \n    setViewMode('list');\n    setSelectedDelivery(null);\n  };\n\n  const handleBack = () => {\n    setViewMode('list');\n    setSelectedDelivery(null);\n  };\n\n  const getStatusBadge = (status: DeliveryOrder['status']) => {\n    const config = {\n      pending: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'Pending' },\n      packing_list_issued: { bg: 'bg-cyan-100', text: 'text-cyan-800', label: 'Packing List' },\n      stock_checked: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Stock Checked' },\n      packing_loading: { bg: 'bg-amber-100', text: 'text-amber-800', label: 'Packing & Loading' },\n      in_transit: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'In Transit' },\n      ready_for_pickup: { bg: 'bg-orange-100', text: 'text-orange-800', label: 'Ready for Pickup' },\n      completed: { bg: 'bg-green-100', text: 'text-green-800', label: 'Completed' },\n    };\n\n    const statusConfig = config[status];\n    if (!statusConfig) {\n      return <Badge className=\"bg-gray-100 text-gray-800\">Unknown</Badge>;\n    }\n    \n    const { bg, text, label } = statusConfig;\n    return <Badge className={`${bg} ${text}`}>{label}</Badge>;\n  };\n\n  const stats = {\n    total: deliveries.length,\n    pending: deliveries.filter(d => d.status === 'pending' || d.status === 'packing_list_issued').length,\n    inProgress: deliveries.filter(d => \n      d.status === 'stock_checked' || d.status === 'packing_loading' || d.status === 'in_transit' || d.status === 'ready_for_pickup'\n    ).length,\n    completed: deliveries.filter(d => d.status === 'completed').length,\n  };\n\n  if (viewMode === 'workflow') {\n    return (\n      <DeliveryWorkflow\n        delivery={selectedDelivery}\n        onSave={handleSaveDelivery}\n        onBack={handleBack}\n      />\n    );\n  }\n\n  if (viewMode === 'details' && selectedDelivery) {\n    return (\n      <DeliveryDetails\n        delivery={selectedDelivery}\n        onProcess={() => setViewMode('workflow')}\n        onBack={handleBack}\n      />\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-[#231F20]\">Delivery Management</h1>\n        <p className=\"text-gray-600\">Manage delivery orders, packing, and dispatch</p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm text-gray-600 flex items-center gap-2\">\n              <Package className=\"size-4\" />\n              Total Orders\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-[#231F20]\">{stats.total}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm text-gray-600 flex items-center gap-2\">\n              <Clock className=\"size-4\" />\n              Pending\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-[#231F20]\">{stats.pending}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm text-gray-600 flex items-center gap-2\">\n              <Truck className=\"size-4\" />\n              In Progress\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-[#231F20]\">{stats.inProgress}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm text-gray-600 flex items-center gap-2\">\n              <CheckCircle2 className=\"size-4\" />\n              Completed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-[#231F20]\">{stats.completed}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 size-4 text-gray-400\" />\n              <Input\n                placeholder=\"Search by DO number, customer, or order ID...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-64\">\n                <Filter className=\"size-4 mr-2\" />\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Status</SelectItem>\n                <SelectItem value=\"pending\">Pending</SelectItem>\n                <SelectItem value=\"packing_list_issued\">Packing List Issued</SelectItem>\n                <SelectItem value=\"stock_checked\">Stock Checked</SelectItem>\n                <SelectItem value=\"packing_loading\">Packing & Loading</SelectItem>\n                <SelectItem value=\"in_transit\">In Transit</SelectItem>\n                <SelectItem value=\"ready_for_pickup\">Ready for Pickup</SelectItem>\n                <SelectItem value=\"completed\">Completed</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Deliveries Table */}\n      <Card>\n        <CardContent className=\"p-0\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>DO Number</TableHead>\n                <TableHead>Customer Name</TableHead>\n                <TableHead>Scheduled Date</TableHead>\n                <TableHead>Type</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredDeliveries.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={6} className=\"text-center py-12\">\n                    <Package className=\"size-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600\">No delivery orders found</p>\n                    <p className=\"text-sm text-gray-500 mt-2\">\n                      {searchQuery || statusFilter !== 'all'\n                        ? 'Try adjusting your filters'\n                        : 'Create your first delivery order to get started'}\n                    </p>\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredDeliveries.map((delivery) => (\n                  <TableRow key={delivery.id}>\n                    <TableCell>\n                      <div className=\"flex items-center gap-2\">\n                        <FileText className=\"size-4 text-gray-400\" />\n                        <span className=\"text-[#231F20]\">{delivery.doNumber}</span>\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <p className=\"text-[#231F20]\">{delivery.customerName}</p>\n                    </TableCell>\n                    <TableCell>\n                      {delivery.scheduledDate ? (\n                        <div className=\"flex items-center gap-2\">\n                          <CalendarIcon className=\"size-4 text-gray-400\" />\n                          <div>\n                            <p className=\"text-[#231F20]\">{new Date(delivery.scheduledDate).toLocaleDateString()}</p>\n                            {delivery.scheduledTimeSlot && (\n                              <p className=\"text-sm text-gray-500\">{delivery.scheduledTimeSlot}</p>\n                            )}\n                          </div>\n                        </div>\n                      ) : (\n                        <span className=\"text-gray-400\">Not scheduled</span>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\" className={delivery.type === 'delivery' ? 'border-blue-500 text-blue-700' : 'border-purple-500 text-purple-700'}>\n                        {delivery.type === 'delivery' ? 'Delivery' : 'Pickup'}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>{getStatusBadge(delivery.status)}</TableCell>\n                    <TableCell className=\"text-right\">\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                          >\n                            <MoreVertical className=\"size-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuItem onClick={() => handleViewDetails(delivery)}>\n                            <Eye className=\"size-4 mr-2\" />\n                            View\n                          </DropdownMenuItem>\n                          {delivery.status !== 'completed' && (\n                            <DropdownMenuItem onClick={() => handleProcessDelivery(delivery)}>\n                              <Edit className=\"size-4 mr-2\" />\n                              Process\n                            </DropdownMenuItem>\n                          )}\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AAOA;AAQA;AAMA;AACA;AACA;;;;;;;;;;;;;;AA4FA,YAAY;AACZ,MAAM,iBAAkC;IACtC;QACE,IAAI;QACJ,UAAU;QACV,SAAS;QACT,aAAa;QACb,cAAc;QACd,iBAAiB;QACjB,iBAAiB;QACjB,aAAa;QACb,MAAM;QACN,OAAO;YACL;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;gBACR,YAAY;YACd;YACA;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;gBACR,YAAY;YACd;SACD;QACD,QAAQ;QACR,eAAe;QACf,mBAAmB;QACnB,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,SAAS;QACT,aAAa;QACb,cAAc;QACd,iBAAiB;QACjB,iBAAiB;QACjB,aAAa;QACb,MAAM;QACN,OAAO;YACL;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;gBACR,YAAY;YACd;SACD;QACD,QAAQ;QACR,eAAe;QACf,mBAAmB;QACnB,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,SAAS;QACT,aAAa;QACb,cAAc;QACd,iBAAiB;QACjB,iBAAiB;QACjB,aAAa;QACb,MAAM;QACN,OAAO;YACL;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;YACV;YACA;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;YACV;SACD;QACD,QAAQ;QACR,eAAe;QACf,mBAAmB;QACnB,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,SAAS;QACT,aAAa;QACb,cAAc;QACd,iBAAiB;QACjB,iBAAiB;QACjB,aAAa;QACb,MAAM;QACN,OAAO;YACL;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;gBACR,YAAY;YACd;YACA;gBACE,IAAI;gBACJ,mBAAmB;gBACnB,qBAAqB;gBACrB,UAAU;gBACV,MAAM;gBACN,gBAAgB;gBAChB,QAAQ;YACV;SACD;QACD,QAAQ;QACR,eAAe;QACf,mBAAmB;QACnB,WAAW;QACX,WAAW;QACX,WAAW;IACb;CACD;AAEM,SAAS;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAkB,EAAE;IAChE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAkB,EAAE;IAChF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAkC;IAC1E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAuB;IAE/E,IAAA,kNAAS,EAAC;QACR,0CAA0C;QAC1C,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,cAAc,KAAK,KAAK,CAAC;QAC3B,OAAO;YACL,cAAc;YACd,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;QACxD;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,WAAW;QAEf,gBAAgB;QAChB,IAAI,aAAa;YACf,WAAW,SAAS,MAAM,CAAC,CAAA,IACzB,EAAE,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OACzD,EAAE,YAAY,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAC7D,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW;QAE5D;QAEA,gBAAgB;QAChB,IAAI,iBAAiB,OAAO;YAC1B,WAAW,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;QAC/C;QAEA,sBAAsB;IACxB,GAAG;QAAC;QAAY;QAAa;KAAa;IAE1C,MAAM,iBAAiB,CAAC;QACtB,cAAc;QACd,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;IACxD;IAEA,MAAM,kBAAkB;QACtB,oBAAoB;QACpB,YAAY;IACd;IAEA,MAAM,oBAAoB,CAAC;QACzB,oBAAoB;QACpB,YAAY;IACd;IAEA,MAAM,wBAAwB,CAAC;QAC7B,oBAAoB;QACpB,YAAY;IACd;IAEA,MAAM,qBAAqB,CAAC;QAC1B,MAAM,QAAQ,CAAC,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS,EAAE;QAExD,IAAI,OAAO;YACT,eAAe;mBAAI;gBAAY;aAAS;YACxC,iJAAK,CAAC,OAAO,CAAC;QAChB,OAAO;YACL,eAAe,WAAW,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS,EAAE,GAAG,WAAW;YACrE,iJAAK,CAAC,OAAO,CAAC;QAChB;QAEA,YAAY;QACZ,oBAAoB;IACtB;IAEA,MAAM,aAAa;QACjB,YAAY;QACZ,oBAAoB;IACtB;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,SAAS;YACb,SAAS;gBAAE,IAAI;gBAAe,MAAM;gBAAiB,OAAO;YAAU;YACtE,qBAAqB;gBAAE,IAAI;gBAAe,MAAM;gBAAiB,OAAO;YAAe;YACvF,eAAe;gBAAE,IAAI;gBAAe,MAAM;gBAAiB,OAAO;YAAgB;YAClF,iBAAiB;gBAAE,IAAI;gBAAgB,MAAM;gBAAkB,OAAO;YAAoB;YAC1F,YAAY;gBAAE,IAAI;gBAAiB,MAAM;gBAAmB,OAAO;YAAa;YAChF,kBAAkB;gBAAE,IAAI;gBAAiB,MAAM;gBAAmB,OAAO;YAAmB;YAC5F,WAAW;gBAAE,IAAI;gBAAgB,MAAM;gBAAkB,OAAO;YAAY;QAC9E;QAEA,MAAM,eAAe,MAAM,CAAC,OAAO;QACnC,IAAI,CAAC,cAAc;YACjB,qBAAO,8OAAC,0IAAK;gBAAC,WAAU;0BAA4B;;;;;;QACtD;QAEA,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;QAC5B,qBAAO,8OAAC,0IAAK;YAAC,WAAW,GAAG,GAAG,CAAC,EAAE,MAAM;sBAAG;;;;;;IAC7C;IAEA,MAAM,QAAQ;QACZ,OAAO,WAAW,MAAM;QACxB,SAAS,WAAW,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,aAAa,EAAE,MAAM,KAAK,uBAAuB,MAAM;QACpG,YAAY,WAAW,MAAM,CAAC,CAAA,IAC5B,EAAE,MAAM,KAAK,mBAAmB,EAAE,MAAM,KAAK,qBAAqB,EAAE,MAAM,KAAK,gBAAgB,EAAE,MAAM,KAAK,oBAC5G,MAAM;QACR,WAAW,WAAW,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,aAAa,MAAM;IACpE;IAEA,IAAI,aAAa,YAAY;QAC3B,qBACE,8OAAC,sKAAgB;YACf,UAAU;YACV,QAAQ;YACR,QAAQ;;;;;;IAGd;IAEA,IAAI,aAAa,aAAa,kBAAkB;QAC9C,qBACE,8OAAC,oKAAe;YACd,UAAU;YACV,WAAW,IAAM,YAAY;YAC7B,QAAQ;;;;;;IAGd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAiB;;;;;;kCAC/B,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;0BAI/B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;0CACpB,cAAA,8OAAC,6IAAS;oCAAC,WAAU;;sDACnB,8OAAC,mNAAO;4CAAC,WAAU;;;;;;wCAAW;;;;;;;;;;;;0CAIlC,8OAAC,+IAAW;0CACV,cAAA,8OAAC;oCAAI,WAAU;8CAAkB,MAAM,KAAK;;;;;;;;;;;;;;;;;kCAGhD,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;0CACpB,cAAA,8OAAC,6IAAS;oCAAC,WAAU;;sDACnB,8OAAC,6MAAK;4CAAC,WAAU;;;;;;wCAAW;;;;;;;;;;;;0CAIhC,8OAAC,+IAAW;0CACV,cAAA,8OAAC;oCAAI,WAAU;8CAAkB,MAAM,OAAO;;;;;;;;;;;;;;;;;kCAGlD,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;0CACpB,cAAA,8OAAC,6IAAS;oCAAC,WAAU;;sDACnB,8OAAC,6MAAK;4CAAC,WAAU;;;;;;wCAAW;;;;;;;;;;;;0CAIhC,8OAAC,+IAAW;0CACV,cAAA,8OAAC;oCAAI,WAAU;8CAAkB,MAAM,UAAU;;;;;;;;;;;;;;;;;kCAGrD,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;0CACpB,cAAA,8OAAC,6IAAS;oCAAC,WAAU;;sDACnB,8OAAC,qOAAY;4CAAC,WAAU;;;;;;wCAAW;;;;;;;;;;;;0CAIvC,8OAAC,+IAAW;0CACV,cAAA,8OAAC;oCAAI,WAAU;8CAAkB,MAAM,SAAS;;;;;;;;;;;;;;;;;;;;;;;0BAMtD,8OAAC,wIAAI;0BACH,cAAA,8OAAC,+IAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,gNAAM;wCAAC,WAAU;;;;;;kDAClB,8OAAC,0IAAK;wCACJ,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC9C,WAAU;;;;;;;;;;;;0CAGd,8OAAC,4IAAM;gCAAC,OAAO;gCAAc,eAAe;;kDAC1C,8OAAC,mJAAa;wCAAC,WAAU;;0DACvB,8OAAC,gNAAM;gDAAC,WAAU;;;;;;0DAClB,8OAAC,iJAAW;gDAAC,aAAY;;;;;;;;;;;;kDAE3B,8OAAC,mJAAa;;0DACZ,8OAAC,gJAAU;gDAAC,OAAM;0DAAM;;;;;;0DACxB,8OAAC,gJAAU;gDAAC,OAAM;0DAAU;;;;;;0DAC5B,8OAAC,gJAAU;gDAAC,OAAM;0DAAsB;;;;;;0DACxC,8OAAC,gJAAU;gDAAC,OAAM;0DAAgB;;;;;;0DAClC,8OAAC,gJAAU;gDAAC,OAAM;0DAAkB;;;;;;0DACpC,8OAAC,gJAAU;gDAAC,OAAM;0DAAa;;;;;;0DAC/B,8OAAC,gJAAU;gDAAC,OAAM;0DAAmB;;;;;;0DACrC,8OAAC,gJAAU;gDAAC,OAAM;0DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQxC,8OAAC,wIAAI;0BACH,cAAA,8OAAC,+IAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC,0IAAK;;0CACJ,8OAAC,gJAAW;0CACV,cAAA,8OAAC,6IAAQ;;sDACP,8OAAC,8IAAS;sDAAC;;;;;;sDACX,8OAAC,8IAAS;sDAAC;;;;;;sDACX,8OAAC,8IAAS;sDAAC;;;;;;sDACX,8OAAC,8IAAS;sDAAC;;;;;;sDACX,8OAAC,8IAAS;sDAAC;;;;;;sDACX,8OAAC,8IAAS;4CAAC,WAAU;sDAAa;;;;;;;;;;;;;;;;;0CAGtC,8OAAC,8IAAS;0CACP,mBAAmB,MAAM,KAAK,kBAC7B,8OAAC,6IAAQ;8CACP,cAAA,8OAAC,8IAAS;wCAAC,SAAS;wCAAG,WAAU;;0DAC/B,8OAAC,mNAAO;gDAAC,WAAU;;;;;;0DACnB,8OAAC;gDAAE,WAAU;0DAAgB;;;;;;0DAC7B,8OAAC;gDAAE,WAAU;0DACV,eAAe,iBAAiB,QAC7B,+BACA;;;;;;;;;;;;;;;;2CAKV,mBAAmB,GAAG,CAAC,CAAC,yBACtB,8OAAC,6IAAQ;;0DACP,8OAAC,8IAAS;0DACR,cAAA,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,0NAAQ;4DAAC,WAAU;;;;;;sEACpB,8OAAC;4DAAK,WAAU;sEAAkB,SAAS,QAAQ;;;;;;;;;;;;;;;;;0DAGvD,8OAAC,8IAAS;0DACR,cAAA,8OAAC;oDAAE,WAAU;8DAAkB,SAAS,YAAY;;;;;;;;;;;0DAEtD,8OAAC,8IAAS;0DACP,SAAS,aAAa,iBACrB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,sNAAY;4DAAC,WAAU;;;;;;sEACxB,8OAAC;;8EACC,8OAAC;oEAAE,WAAU;8EAAkB,IAAI,KAAK,SAAS,aAAa,EAAE,kBAAkB;;;;;;gEACjF,SAAS,iBAAiB,kBACzB,8OAAC;oEAAE,WAAU;8EAAyB,SAAS,iBAAiB;;;;;;;;;;;;;;;;;yEAKtE,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;;;;;;0DAGpC,8OAAC,8IAAS;0DACR,cAAA,8OAAC,0IAAK;oDAAC,SAAQ;oDAAU,WAAW,SAAS,IAAI,KAAK,aAAa,kCAAkC;8DAClG,SAAS,IAAI,KAAK,aAAa,aAAa;;;;;;;;;;;0DAGjD,8OAAC,8IAAS;0DAAE,eAAe,SAAS,MAAM;;;;;;0DAC1C,8OAAC,8IAAS;gDAAC,WAAU;0DACnB,cAAA,8OAAC,4JAAY;;sEACX,8OAAC,mKAAmB;4DAAC,OAAO;sEAC1B,cAAA,8OAAC,4IAAM;gEACL,SAAQ;gEACR,MAAK;0EAEL,cAAA,8OAAC,0OAAY;oEAAC,WAAU;;;;;;;;;;;;;;;;sEAG5B,8OAAC,mKAAmB;4DAAC,OAAM;;8EACzB,8OAAC,gKAAgB;oEAAC,SAAS,IAAM,kBAAkB;;sFACjD,8OAAC,uMAAG;4EAAC,WAAU;;;;;;wEAAgB;;;;;;;gEAGhC,SAAS,MAAM,KAAK,6BACnB,8OAAC,gKAAgB;oEAAC,SAAS,IAAM,sBAAsB;;sFACrD,8OAAC,mNAAI;4EAAC,WAAU;;;;;;wEAAgB;;;;;;;;;;;;;;;;;;;;;;;;;uCAhD7B,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgE5C"}}]
}