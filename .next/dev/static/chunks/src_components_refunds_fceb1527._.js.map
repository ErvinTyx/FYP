{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/refunds/RefundList.tsx"],"sourcesContent":["import { Plus, Eye } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"../ui/table\";\nimport { Badge } from \"../ui/badge\";\nimport { RefundRecord, RefundStatus } from \"./RefundManagementMain\";\n\ninterface RefundListProps {\n  refunds: RefundRecord[];\n  onCreateNew: () => void;\n  onViewDetails: (refund: RefundRecord) => void;\n}\n\nexport function RefundList({ refunds, onCreateNew, onViewDetails }: RefundListProps) {\n  const getStatusBadge = (status: RefundStatus) => {\n    switch (status) {\n      case \"Draft\":\n        return <Badge className=\"bg-[#6B7280] hover:bg-[#4B5563]\">Draft</Badge>;\n      case \"Pending Approval\":\n        return <Badge className=\"bg-[#F59E0B] hover:bg-[#D97706]\">Pending Approval</Badge>;\n      case \"Approved\":\n        return <Badge className=\"bg-[#059669] hover:bg-[#047857]\">Approved</Badge>;\n      case \"Rejected\":\n        return <Badge className=\"bg-[#DC2626] hover:bg-[#B91C1C]\">Rejected</Badge>;\n    }\n  };\n\n  const totalAmount = refunds.reduce((acc, refund) => {\n    const amount = parseFloat(refund.refundAmount.replace(\"RM\", \"\").replace(\",\", \"\"));\n    return acc + amount;\n  }, 0);\n\n  const pendingCount = refunds.filter(r => r.status === \"Pending Approval\").length;\n  const approvedCount = refunds.filter(r => r.status === \"Approved\").length;\n  const draftCount = refunds.filter(r => r.status === \"Draft\").length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-start\">\n        <div className=\"space-y-2\">\n          <h1>Refund Management</h1>\n          <p className=\"text-[#374151]\">Process and track refund requests across all invoice types</p>\n        </div>\n        <Button\n          onClick={onCreateNew}\n          className=\"bg-[#F15929] hover:bg-[#D14821] h-10 px-6 rounded-lg\"\n        >\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Issue New Refund\n        </Button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Total Refunds</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-[#111827]\">{refunds.length}</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Pending Approval</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-[#F59E0B]\">{pendingCount}</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Approved</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-[#059669]\">{approvedCount}</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-[14px] text-[#6B7280]\">Total Amount</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-[#111827]\">RM{totalAmount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Refunds Table */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <CardTitle className=\"text-[18px]\">Refund Listing</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"bg-[#F9FAFB] hover:bg-[#F9FAFB]\">\n                <TableHead>Refund ID</TableHead>\n                <TableHead>Invoice No</TableHead>\n                <TableHead>Invoice Type</TableHead>\n                <TableHead>Customer</TableHead>\n                <TableHead>Refund Amount</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Created Date</TableHead>\n                <TableHead className=\"text-right\">Action</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {refunds.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={8} className=\"text-center text-[#6B7280] h-32\">\n                    No refund records found. Click \"Issue New Refund\" to create one.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                refunds.map((refund) => (\n                  <TableRow key={refund.id} className=\"h-14 hover:bg-[#F3F4F6]\">\n                    <TableCell className=\"text-[#111827]\">{refund.refundId}</TableCell>\n                    <TableCell className=\"text-[#374151]\">{refund.invoiceNo}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"secondary\" className=\"bg-[#F3F4F6] text-[#374151]\">\n                        {refund.invoiceType}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-[#374151]\">{refund.customer}</TableCell>\n                    <TableCell className=\"text-[#111827]\">{refund.refundAmount}</TableCell>\n                    <TableCell>{getStatusBadge(refund.status)}</TableCell>\n                    <TableCell className=\"text-[#374151]\">{refund.createdDate}</TableCell>\n                    <TableCell className=\"text-right\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"hover:bg-[#F3F4F6]\"\n                        onClick={() => onViewDetails(refund)}\n                      >\n                        <Eye className=\"mr-1 h-4 w-4\" />\n                        View\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/refunds/CreateRefund.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { ArrowLeft, Upload, FileText, DollarSign, CreditCard } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../ui/card\";\nimport { Input } from \"../ui/input\";\nimport { Label } from \"../ui/label\";\nimport { Textarea } from \"../ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"../ui/select\";\nimport { toast } from \"sonner\";\nimport { RefundRecord } from \"./RefundManagementMain\";\n\ninterface CreateRefundProps {\n  onBack: () => void;\n  onSave: (refund: RefundRecord) => void;\n}\n\ninterface InvoiceOption {\n  invoiceNo: string;\n  type: \"Deposit\" | \"Monthly Billing\" | \"Credit Note\";\n  customer: string;\n  items: string;\n  paidAmount: string;\n}\n\nconst mockInvoices: InvoiceOption[] = [\n  {\n    invoiceNo: \"DEP-2024-0345\",\n    type: \"Deposit\",\n    customer: \"Sunrise Construction Ltd.\",\n    items: \"Scaffolding Equipment Deposit - 100 units\",\n    paidAmount: \"RM10,000.00\",\n  },\n  {\n    invoiceNo: \"MR-2024-0234\",\n    type: \"Monthly Billing\",\n    customer: \"BuildMaster Inc.\",\n    items: \"Monthly Rental - November 2024\",\n    paidAmount: \"RM4,500.00\",\n  },\n  {\n    invoiceNo: \"CN-2024-0067\",\n    type: \"Credit Note\",\n    customer: \"Metro Construction Group\",\n    items: \"Credit Note for returned items\",\n    paidAmount: \"RM1,200.00\",\n  },\n  {\n    invoiceNo: \"DEP-2024-0389\",\n    type: \"Deposit\",\n    customer: \"Premium Builders Sdn Bhd\",\n    items: \"Equipment Deposit - Phase 2\",\n    paidAmount: \"RM8,500.00\",\n  },\n];\n\nexport function CreateRefund({ onBack, onSave }: CreateRefundProps) {\n  const [selectedInvoice, setSelectedInvoice] = useState<InvoiceOption | null>(null);\n  const [refundAmount, setRefundAmount] = useState(\"\");\n  const [refundMethod, setRefundMethod] = useState(\"\");\n  const [reason, setReason] = useState(\"\");\n  const [uploadedFiles, setUploadedFiles] = useState<string[]>([]);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const handleInvoiceSelect = (invoiceNo: string) => {\n    const invoice = mockInvoices.find(inv => inv.invoiceNo === invoiceNo);\n    setSelectedInvoice(invoice || null);\n    setErrors({});\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files) {\n      const newFiles = Array.from(files).map(file => file.name);\n      setUploadedFiles([...uploadedFiles, ...newFiles]);\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!selectedInvoice) {\n      newErrors.invoice = \"Please select an invoice\";\n    }\n\n    if (!refundAmount) {\n      newErrors.refundAmount = \"Refund amount is required\";\n    } else {\n      const amount = parseFloat(refundAmount);\n      const maxAmount = selectedInvoice \n        ? parseFloat(selectedInvoice.paidAmount.replace(\"RM\", \"\").replace(\",\", \"\"))\n        : 0;\n      \n      if (amount <= 0) {\n        newErrors.refundAmount = \"Refund amount must be greater than 0\";\n      } else if (amount > maxAmount) {\n        newErrors.refundAmount = `Refund amount cannot exceed paid amount (${selectedInvoice?.paidAmount})`;\n      }\n    }\n\n    if (!refundMethod) {\n      newErrors.refundMethod = \"Please select a refund method\";\n    }\n\n    if (!reason.trim()) {\n      newErrors.reason = \"Reason for refund is required\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSaveDraft = () => {\n    if (!selectedInvoice) {\n      toast.error(\"Please select an invoice before saving\");\n      return;\n    }\n\n    const newRefund: RefundRecord = {\n      id: Date.now().toString(),\n      refundId: `REF-2024-${String(Date.now()).slice(-3)}`,\n      invoiceNo: selectedInvoice.invoiceNo,\n      invoiceType: selectedInvoice.type,\n      customer: selectedInvoice.customer,\n      refundAmount: refundAmount ? `RM${parseFloat(refundAmount).toLocaleString(undefined, { minimumFractionDigits: 2 })}` : \"RM0.00\",\n      status: \"Draft\",\n      createdDate: new Date().toISOString().split('T')[0],\n      refundMethod: refundMethod || undefined,\n      reason: reason || undefined,\n      supportingDocs: uploadedFiles.length > 0 ? uploadedFiles : undefined,\n      paidAmount: selectedInvoice.paidAmount,\n      invoiceItems: selectedInvoice.items,\n    };\n\n    onSave(newRefund);\n    toast.success(\"Refund saved as draft\");\n  };\n\n  const handleSubmitForApproval = () => {\n    if (!validateForm()) {\n      toast.error(\"Please fill in all required fields correctly\");\n      return;\n    }\n\n    const newRefund: RefundRecord = {\n      id: Date.now().toString(),\n      refundId: `REF-2024-${String(Date.now()).slice(-3)}`,\n      invoiceNo: selectedInvoice!.invoiceNo,\n      invoiceType: selectedInvoice!.type,\n      customer: selectedInvoice!.customer,\n      refundAmount: `RM${parseFloat(refundAmount).toLocaleString(undefined, { minimumFractionDigits: 2 })}`,\n      status: \"Pending Approval\",\n      createdDate: new Date().toISOString().split('T')[0],\n      refundMethod,\n      reason,\n      supportingDocs: uploadedFiles.length > 0 ? uploadedFiles : undefined,\n      paidAmount: selectedInvoice!.paidAmount,\n      invoiceItems: selectedInvoice!.items,\n    };\n\n    onSave(newRefund);\n    toast.success(\"Refund submitted for approval\");\n  };\n\n  const maxAmount = selectedInvoice \n    ? parseFloat(selectedInvoice.paidAmount.replace(\"RM\", \"\").replace(\",\", \"\"))\n    : 0;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onBack}\n          className=\"hover:bg-[#F3F4F6]\"\n        >\n          <ArrowLeft className=\"h-5 w-5\" />\n        </Button>\n        <div className=\"space-y-1\">\n          <h1>Issue New Refund</h1>\n          <p className=\"text-[#374151]\">Create a refund request for an existing invoice</p>\n        </div>\n      </div>\n\n      {/* Section A: Select Invoice */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-[#F15929] flex items-center justify-center\">\n              <FileText className=\"h-4 w-4 text-white\" />\n            </div>\n            <CardTitle className=\"text-[18px]\">Select Invoice</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"invoice\">Search and Select Invoice</Label>\n            <Select onValueChange={handleInvoiceSelect}>\n              <SelectTrigger className={`h-10 ${errors.invoice ? \"border-[#DC2626]\" : \"\"}`}>\n                <SelectValue placeholder=\"Select an invoice...\" />\n              </SelectTrigger>\n              <SelectContent>\n                {mockInvoices.map((invoice) => (\n                  <SelectItem key={invoice.invoiceNo} value={invoice.invoiceNo}>\n                    {invoice.invoiceNo} - {invoice.customer} ({invoice.type})\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {errors.invoice && (\n              <p className=\"text-[#DC2626] text-[14px]\">{errors.invoice}</p>\n            )}\n          </div>\n\n          {/* Invoice Summary Card */}\n          {selectedInvoice && (\n            <Card className=\"border-[#E5E7EB] bg-[#F9FAFB]\">\n              <CardContent className=\"pt-6 space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-[14px] text-[#6B7280]\">Invoice No:</span>\n                  <span className=\"text-[14px] text-[#111827]\">{selectedInvoice.invoiceNo}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-[14px] text-[#6B7280]\">Type:</span>\n                  <span className=\"text-[14px] text-[#111827]\">{selectedInvoice.type}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-[14px] text-[#6B7280]\">Customer:</span>\n                  <span className=\"text-[14px] text-[#111827]\">{selectedInvoice.customer}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-[14px] text-[#6B7280]\">Items:</span>\n                  <span className=\"text-[14px] text-[#111827]\">{selectedInvoice.items}</span>\n                </div>\n                <div className=\"border-t border-[#E5E7EB] pt-3 flex justify-between\">\n                  <span className=\"text-[14px] text-[#111827]\">Paid Amount:</span>\n                  <span className=\"text-[#059669]\">{selectedInvoice.paidAmount}</span>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Section B: Refund Details */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-[#F15929] flex items-center justify-center\">\n              <DollarSign className=\"h-4 w-4 text-white\" />\n            </div>\n            <CardTitle className=\"text-[18px]\">Refund Details</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Refund Amount */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"refundAmount\">\n              Refund Amount {selectedInvoice && <span className=\"text-[#6B7280] text-[12px]\">(Max: {selectedInvoice.paidAmount})</span>}\n            </Label>\n            <div className=\"relative\">\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-[#6B7280]\">RM</span>\n              <Input\n                id=\"refundAmount\"\n                type=\"number\"\n                step=\"0.01\"\n                value={refundAmount}\n                onChange={(e) => {\n                  setRefundAmount(e.target.value);\n                  if (errors.refundAmount) {\n                    setErrors({ ...errors, refundAmount: \"\" });\n                  }\n                }}\n                className={`h-10 pl-12 ${errors.refundAmount ? \"border-[#DC2626]\" : \"\"}`}\n                placeholder=\"0.00\"\n                disabled={!selectedInvoice}\n              />\n            </div>\n            {errors.refundAmount && (\n              <p className=\"text-[#DC2626] text-[14px]\">{errors.refundAmount}</p>\n            )}\n          </div>\n\n          {/* Refund Method */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"refundMethod\">Refund Method</Label>\n            <Select value={refundMethod} onValueChange={(value) => {\n              setRefundMethod(value);\n              if (errors.refundMethod) {\n                setErrors({ ...errors, refundMethod: \"\" });\n              }\n            }} disabled={!selectedInvoice}>\n              <SelectTrigger className={`h-10 ${errors.refundMethod ? \"border-[#DC2626]\" : \"\"}`}>\n                <SelectValue placeholder=\"Select refund method...\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Bank Transfer\">Bank Transfer</SelectItem>\n                <SelectItem value=\"Cash\">Cash</SelectItem>\n                <SelectItem value=\"Cheque\">Cheque</SelectItem>\n                <SelectItem value=\"eWallet\">eWallet</SelectItem>\n              </SelectContent>\n            </Select>\n            {errors.refundMethod && (\n              <p className=\"text-[#DC2626] text-[14px]\">{errors.refundMethod}</p>\n            )}\n          </div>\n\n          {/* Reason */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"reason\">Reason for Refund</Label>\n            <Textarea\n              id=\"reason\"\n              value={reason}\n              onChange={(e) => {\n                setReason(e.target.value);\n                if (errors.reason) {\n                  setErrors({ ...errors, reason: \"\" });\n                }\n              }}\n              className={`min-h-[100px] ${errors.reason ? \"border-[#DC2626]\" : \"\"}`}\n              placeholder=\"Provide a detailed reason for the refund...\"\n              disabled={!selectedInvoice}\n            />\n            {errors.reason && (\n              <p className=\"text-[#DC2626] text-[14px]\">{errors.reason}</p>\n            )}\n          </div>\n\n          {/* Upload Supporting Documents */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"documents\">Upload Supporting Documents</Label>\n            <div className=\"border-2 border-dashed border-[#E5E7EB] rounded-lg p-6 text-center hover:border-[#F15929] transition-colors\">\n              <Upload className=\"h-8 w-8 text-[#6B7280] mx-auto mb-2\" />\n              <p className=\"text-[14px] text-[#374151] mb-2\">\n                Click to upload or drag and drop\n              </p>\n              <p className=\"text-[12px] text-[#6B7280] mb-4\">\n                PDF, JPG, PNG up to 10MB\n              </p>\n              <input\n                id=\"documents\"\n                type=\"file\"\n                multiple\n                onChange={handleFileUpload}\n                className=\"hidden\"\n                accept=\".pdf,.jpg,.jpeg,.png\"\n                disabled={!selectedInvoice}\n              />\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => document.getElementById('documents')?.click()}\n                disabled={!selectedInvoice}\n              >\n                Select Files\n              </Button>\n            </div>\n            {uploadedFiles.length > 0 && (\n              <div className=\"space-y-2 mt-3\">\n                <p className=\"text-[14px] text-[#374151]\">Uploaded Files:</p>\n                {uploadedFiles.map((file, index) => (\n                  <div key={index} className=\"flex items-center gap-2 text-[14px] text-[#6B7280] bg-[#F9FAFB] p-2 rounded\">\n                    <FileText className=\"h-4 w-4\" />\n                    {file}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Section C: Action Buttons */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex gap-3\">\n            <Button\n              variant=\"outline\"\n              className=\"flex-1 h-10\"\n              onClick={handleSaveDraft}\n              disabled={!selectedInvoice}\n            >\n              Save as Draft\n            </Button>\n            <Button\n              className=\"flex-1 bg-[#F15929] hover:bg-[#D14821] h-10\"\n              onClick={handleSubmitForApproval}\n              disabled={!selectedInvoice}\n            >\n              Submit for Approval\n            </Button>\n          </div>\n          <p className=\"text-[12px] text-[#6B7280] mt-3 text-center\">\n            Once submitted, the refund cannot be edited unless rejected by Finance/Admin\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/refunds/RefundDetails.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { ArrowLeft, FileText, CheckCircle, XCircle, Edit, Upload } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../ui/card\";\nimport { Badge } from \"../ui/badge\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"../ui/alert-dialog\";\nimport { Textarea } from \"../ui/textarea\";\nimport { Label } from \"../ui/label\";\nimport { toast } from \"sonner\";\nimport { RefundRecord, RefundStatus } from \"./RefundManagementMain\";\n\ninterface RefundDetailsProps {\n  refund: RefundRecord;\n  userRole: \"Admin\" | \"Finance\" | \"Staff\" | \"Customer\";\n  onBack: () => void;\n  onApprove: (refundId: string) => void;\n  onReject: (refundId: string, reason: string) => void;\n  onUpdate: (refund: RefundRecord) => void;\n}\n\nexport function RefundDetails({ \n  refund, \n  userRole, \n  onBack, \n  onApprove, \n  onReject,\n  onUpdate \n}: RefundDetailsProps) {\n  const [showApproveDialog, setShowApproveDialog] = useState(false);\n  const [showRejectDialog, setShowRejectDialog] = useState(false);\n  const [rejectionReason, setRejectionReason] = useState(\"\");\n  const [uploadedFiles, setUploadedFiles] = useState<string[]>(refund.supportingDocs || []);\n\n  const canApprove = (userRole === \"Admin\" || userRole === \"Finance\") && refund.status === \"Pending Approval\";\n  const canReupload = refund.status === \"Rejected\";\n\n  const getStatusBadge = (status: RefundStatus) => {\n    switch (status) {\n      case \"Draft\":\n        return <Badge className=\"bg-[#6B7280] hover:bg-[#4B5563]\">Draft</Badge>;\n      case \"Pending Approval\":\n        return <Badge className=\"bg-[#F59E0B] hover:bg-[#D97706]\">Pending Approval</Badge>;\n      case \"Approved\":\n        return <Badge className=\"bg-[#059669] hover:bg-[#047857]\">Approved</Badge>;\n      case \"Rejected\":\n        return <Badge className=\"bg-[#DC2626] hover:bg-[#B91C1C]\">Rejected</Badge>;\n    }\n  };\n\n  const handleApprove = () => {\n    onApprove(refund.id);\n    setShowApproveDialog(false);\n    toast.success(\"Refund approved successfully\");\n  };\n\n  const handleReject = () => {\n    if (!rejectionReason.trim()) {\n      toast.error(\"Please provide a reason for rejection\");\n      return;\n    }\n    onReject(refund.id, rejectionReason);\n    setShowRejectDialog(false);\n    setRejectionReason(\"\");\n    toast.success(\"Refund rejected\");\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files) {\n      const newFiles = Array.from(files).map(file => file.name);\n      const updatedFiles = [...uploadedFiles, ...newFiles];\n      setUploadedFiles(updatedFiles);\n      \n      // Update refund with new files and change status back to Pending Approval\n      const updatedRefund: RefundRecord = {\n        ...refund,\n        supportingDocs: updatedFiles,\n        status: \"Pending Approval\",\n        rejectionReason: undefined,\n      };\n      onUpdate(updatedRefund);\n      toast.success(\"Documents uploaded. Status changed to Pending Approval.\");\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={onBack}\n            className=\"hover:bg-[#F3F4F6]\"\n          >\n            <ArrowLeft className=\"h-5 w-5\" />\n          </Button>\n          <div className=\"space-y-1\">\n            <h1>{refund.refundId}</h1>\n            <p className=\"text-[#374151]\">Refund request details and approval workflow</p>\n          </div>\n        </div>\n        {getStatusBadge(refund.status)}\n      </div>\n\n      {/* Refund Information */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <CardTitle className=\"text-[18px]\">Refund Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Refund ID</p>\n              <p className=\"text-[#111827]\">{refund.refundId}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Created Date</p>\n              <p className=\"text-[#111827]\">{refund.createdDate}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Invoice No</p>\n              <p className=\"text-[#111827]\">{refund.invoiceNo}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Invoice Type</p>\n              <Badge variant=\"secondary\" className=\"bg-[#F3F4F6] text-[#374151]\">\n                {refund.invoiceType}\n              </Badge>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Customer</p>\n              <p className=\"text-[#111827]\">{refund.customer}</p>\n            </div>\n            <div>\n              <p className=\"text-[14px] text-[#6B7280]\">Refund Method</p>\n              <p className=\"text-[#111827]\">{refund.refundMethod || \"Not specified\"}</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Invoice Summary */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <CardTitle className=\"text-[18px]\">Invoice Summary</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-[14px] text-[#6B7280]\">Invoice Items:</span>\n            <span className=\"text-[14px] text-[#111827]\">{refund.invoiceItems}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-[14px] text-[#6B7280]\">Paid Amount:</span>\n            <span className=\"text-[14px] text-[#111827]\">{refund.paidAmount}</span>\n          </div>\n          <div className=\"border-t border-[#E5E7EB] pt-3 flex justify-between\">\n            <span className=\"text-[#111827]\">Refund Amount:</span>\n            <span className=\"text-[#059669]\">{refund.refundAmount}</span>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Refund Reason */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <CardTitle className=\"text-[18px]\">Reason for Refund</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-[#374151]\">{refund.reason || \"No reason provided\"}</p>\n        </CardContent>\n      </Card>\n\n      {/* Supporting Documents */}\n      <Card className=\"border-[#E5E7EB]\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-[18px]\">Supporting Documents</CardTitle>\n            {canReupload && (\n              <div>\n                <input\n                  id=\"reupload-docs\"\n                  type=\"file\"\n                  multiple\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                  accept=\".pdf,.jpg,.jpeg,.png\"\n                />\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => document.getElementById('reupload-docs')?.click()}\n                >\n                  <Upload className=\"mr-2 h-4 w-4\" />\n                  Upload New Documents\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {uploadedFiles.length > 0 ? (\n            <div className=\"space-y-2\">\n              {uploadedFiles.map((file, index) => (\n                <div key={index} className=\"flex items-center gap-2 p-3 bg-[#F9FAFB] rounded-lg\">\n                  <FileText className=\"h-4 w-4 text-[#6B7280]\" />\n                  <span className=\"text-[14px] text-[#374151]\">{file}</span>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-[#6B7280]\">No documents uploaded</p>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Rejection Reason (if rejected) */}\n      {refund.status === \"Rejected\" && refund.rejectionReason && (\n        <Card className=\"border-[#DC2626] bg-[#FEE2E2]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px] text-[#DC2626]\">Rejection Reason</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-[#991B1B]\">{refund.rejectionReason}</p>\n            <p className=\"text-[12px] text-[#991B1B] mt-2\">\n              Please upload additional documents and the status will automatically change to Pending Approval.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Approval Information (if approved) */}\n      {refund.status === \"Approved\" && (\n        <Card className=\"border-[#059669] bg-[#D1FAE5]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px] text-[#059669]\">Approval Information</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-[14px] text-[#065F46]\">Approved By:</span>\n              <span className=\"text-[14px] text-[#065F46]\">{refund.approvedBy}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-[14px] text-[#065F46]\">Approved Date:</span>\n              <span className=\"text-[14px] text-[#065F46]\">{refund.approvedDate}</span>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Approval Actions (for Finance/Admin only) */}\n      {canApprove && (\n        <Card className=\"border-[#E5E7EB]\">\n          <CardHeader>\n            <CardTitle className=\"text-[18px]\">Approval Actions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex gap-3\">\n              <Button\n                className=\"flex-1 bg-[#059669] hover:bg-[#047857] h-10\"\n                onClick={() => setShowApproveDialog(true)}\n              >\n                <CheckCircle className=\"mr-2 h-4 w-4\" />\n                Approve Refund\n              </Button>\n              <Button\n                variant=\"destructive\"\n                className=\"flex-1 h-10 bg-[#DC2626] hover:bg-[#B91C1C]\"\n                onClick={() => setShowRejectDialog(true)}\n              >\n                <XCircle className=\"mr-2 h-4 w-4\" />\n                Reject Refund\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Approve Dialog */}\n      <AlertDialog open={showApproveDialog} onOpenChange={setShowApproveDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Approve Refund</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to approve this refund of {refund.refundAmount} for {refund.customer}?\n              This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleApprove}\n              className=\"bg-[#059669] hover:bg-[#047857]\"\n            >\n              Approve\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Reject Dialog */}\n      <AlertDialog open={showRejectDialog} onOpenChange={setShowRejectDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Reject Refund</AlertDialogTitle>\n            <AlertDialogDescription>\n              Please provide a reason for rejecting this refund request.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <div className=\"py-4\">\n            <Label htmlFor=\"rejectionReason\">Rejection Reason</Label>\n            <Textarea\n              id=\"rejectionReason\"\n              value={rejectionReason}\n              onChange={(e) => setRejectionReason(e.target.value)}\n              className=\"mt-2 min-h-[100px]\"\n              placeholder=\"Explain why this refund is being rejected...\"\n            />\n          </div>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={() => setRejectionReason(\"\")}>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleReject}\n              className=\"bg-[#DC2626] hover:bg-[#B91C1C]\"\n            >\n              Reject\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2464, "column": 0}, "map": {"version":3,"sources":["file:///home/ervin/Documents/Power%20Metal%20%26%20Steel/src/components/refunds/RefundManagementMain.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { RefundList } from \"./RefundList\";\nimport { CreateRefund } from \"./CreateRefund\";\nimport { RefundDetails } from \"./RefundDetails\";\n\nexport type RefundStatus = \"Draft\" | \"Pending Approval\" | \"Approved\" | \"Rejected\";\n\nexport interface RefundRecord {\n  id: string;\n  refundId: string;\n  invoiceNo: string;\n  invoiceType: \"Deposit\" | \"Monthly Billing\" | \"Credit Note\";\n  customer: string;\n  refundAmount: string;\n  status: RefundStatus;\n  createdDate: string;\n  refundMethod?: string;\n  reason?: string;\n  supportingDocs?: string[];\n  rejectionReason?: string;\n  paidAmount?: string;\n  invoiceItems?: string;\n  approvedBy?: string;\n  approvedDate?: string;\n}\n\ninterface RefundManagementMainProps {\n  userRole?: \"Admin\" | \"Finance\" | \"Staff\" | \"Customer\";\n}\n\nexport function RefundManagementMain({ userRole = \"Staff\" }: RefundManagementMainProps) {\n  const [currentView, setCurrentView] = useState<\"list\" | \"create\" | \"details\">(\"list\");\n  const [selectedRefund, setSelectedRefund] = useState<RefundRecord | null>(null);\n  const [refunds, setRefunds] = useState<RefundRecord[]>([\n    {\n      id: \"1\",\n      refundId: \"REF-2024-001\",\n      invoiceNo: \"DEP-2024-0234\",\n      invoiceType: \"Deposit\",\n      customer: \"Acme Construction Ltd.\",\n      refundAmount: \"RM5,000.00\",\n      status: \"Pending Approval\",\n      createdDate: \"2024-11-25\",\n      refundMethod: \"Bank Transfer\",\n      reason: \"Project completed. All equipment returned in good condition.\",\n      paidAmount: \"RM5,000.00\",\n      invoiceItems: \"Scaffolding Equipment Deposit\",\n    },\n    {\n      id: \"2\",\n      refundId: \"REF-2024-002\",\n      invoiceNo: \"MR-2024-0156\",\n      invoiceType: \"Monthly Billing\",\n      customer: \"BuildRight Inc.\",\n      refundAmount: \"RM1,200.00\",\n      status: \"Approved\",\n      createdDate: \"2024-11-20\",\n      refundMethod: \"eWallet\",\n      reason: \"Overpayment refund\",\n      paidAmount: \"RM3,500.00\",\n      invoiceItems: \"Monthly Rental - October 2024\",\n      approvedBy: \"Admin\",\n      approvedDate: \"2024-11-22\",\n    },\n    {\n      id: \"3\",\n      refundId: \"REF-2024-003\",\n      invoiceNo: \"DEP-2024-0198\",\n      invoiceType: \"Deposit\",\n      customer: \"Metro Builders Sdn Bhd\",\n      refundAmount: \"RM3,500.00\",\n      status: \"Draft\",\n      createdDate: \"2024-11-28\",\n      refundMethod: \"Bank Transfer\",\n      reason: \"Early contract termination\",\n      paidAmount: \"RM5,000.00\",\n      invoiceItems: \"Equipment Deposit\",\n    },\n    {\n      id: \"4\",\n      refundId: \"REF-2024-004\",\n      invoiceNo: \"CN-2024-0045\",\n      invoiceType: \"Credit Note\",\n      customer: \"Premium Projects\",\n      refundAmount: \"RM850.00\",\n      status: \"Rejected\",\n      createdDate: \"2024-11-15\",\n      refundMethod: \"Cash\",\n      reason: \"Damaged item refund claim\",\n      paidAmount: \"RM850.00\",\n      invoiceItems: \"Credit Note for damaged scaffolding\",\n      rejectionReason: \"Insufficient documentation provided. Please upload damage assessment report.\",\n    },\n    {\n      id: \"5\",\n      refundId: \"REF-2024-005\",\n      invoiceNo: \"DEP-2024-0302\",\n      invoiceType: \"Deposit\",\n      customer: \"City Construction Group\",\n      refundAmount: \"RM7,500.00\",\n      status: \"Approved\",\n      createdDate: \"2024-11-10\",\n      refundMethod: \"Bank Transfer\",\n      reason: \"Project completion, no outstanding issues\",\n      paidAmount: \"RM7,500.00\",\n      invoiceItems: \"Full Equipment Deposit\",\n      approvedBy: \"Finance Manager\",\n      approvedDate: \"2024-11-12\",\n    },\n  ]);\n\n  const handleCreateNew = () => {\n    setCurrentView(\"create\");\n  };\n\n  const handleViewDetails = (refund: RefundRecord) => {\n    setSelectedRefund(refund);\n    setCurrentView(\"details\");\n  };\n\n  const handleBackToList = () => {\n    setCurrentView(\"list\");\n    setSelectedRefund(null);\n  };\n\n  const handleSaveRefund = (newRefund: RefundRecord) => {\n    setRefunds([...refunds, newRefund]);\n    setCurrentView(\"list\");\n  };\n\n  const handleUpdateRefund = (updatedRefund: RefundRecord) => {\n    setRefunds(refunds.map(r => r.id === updatedRefund.id ? updatedRefund : r));\n    if (currentView === \"details\") {\n      setSelectedRefund(updatedRefund);\n    }\n  };\n\n  const handleApproveRefund = (refundId: string) => {\n    const updatedRefunds = refunds.map(r => {\n      if (r.id === refundId) {\n        return {\n          ...r,\n          status: \"Approved\" as RefundStatus,\n          approvedBy: userRole,\n          approvedDate: new Date().toISOString().split('T')[0],\n        };\n      }\n      return r;\n    });\n    setRefunds(updatedRefunds);\n    const updated = updatedRefunds.find(r => r.id === refundId);\n    if (updated) {\n      setSelectedRefund(updated);\n    }\n  };\n\n  const handleRejectRefund = (refundId: string, reason: string) => {\n    const updatedRefunds = refunds.map(r => {\n      if (r.id === refundId) {\n        return {\n          ...r,\n          status: \"Rejected\" as RefundStatus,\n          rejectionReason: reason,\n        };\n      }\n      return r;\n    });\n    setRefunds(updatedRefunds);\n    const updated = updatedRefunds.find(r => r.id === refundId);\n    if (updated) {\n      setSelectedRefund(updated);\n    }\n  };\n\n  if (currentView === \"create\") {\n    return <CreateRefund onBack={handleBackToList} onSave={handleSaveRefund} />;\n  }\n\n  if (currentView === \"details\" && selectedRefund) {\n    return (\n      <RefundDetails\n        refund={selectedRefund}\n        userRole={userRole}\n        onBack={handleBackToList}\n        onApprove={handleApproveRefund}\n        onReject={handleRejectRefund}\n        onUpdate={handleUpdateRefund}\n      />\n    );\n  }\n\n  return (\n    <RefundList\n      refunds={refunds}\n      onCreateNew={handleCreateNew}\n      onViewDetails={handleViewDetails}\n    />\n  );\n}\n"],"names":[],"mappings":"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"}}]
}